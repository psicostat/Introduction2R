<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Capitolo 10 Dataframe | Introduction to R</title>
  <meta name="description" content="Questo è un libro intorduttivo ad R prodotto da Psicostat, gruppo di ricerca interdisciplinare che unisce la passione per la statistica e la psicologia." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Capitolo 10 Dataframe | Introduction to R" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://psicostat.github.io/Introduction2R/" />
  <meta property="og:image" content="https://psicostat.github.io/Introduction2R/images/logo_psicostat.png" />
  <meta property="og:description" content="Questo è un libro intorduttivo ad R prodotto da Psicostat, gruppo di ricerca interdisciplinare che unisce la passione per la statistica e la psicologia." />
  <meta name="github-repo" content="psicostat/Introduction2R" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Capitolo 10 Dataframe | Introduction to R" />
  
  <meta name="twitter:description" content="Questo è un libro intorduttivo ad R prodotto da Psicostat, gruppo di ricerca interdisciplinare che unisce la passione per la statistica e la psicologia." />
  <meta name="twitter:image" content="https://psicostat.github.io/Introduction2R/images/logo_psicostat.png" />

<meta name="author" content="Claudio Zandonella Callegher and Filippo Gambarota members of Psicostat" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="matrix.html"/>
<link rel="next" href="list.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="assets/style.css" type="text/css" />
<link rel="stylesheet" href="assets/toc.css" type="text/css" />
<link rel="stylesheet" href="assets/custom.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="toc-logo"><a href="./"><img src="images/hex_psicostat.png"></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Presentazione</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#perchè-r"><i class="fa fa-check"></i>Perchè R</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#struttura-del-libro"><i class="fa fa-check"></i>Struttura del libro</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#risorse-utili"><i class="fa fa-check"></i>Risorse Utili</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#psicostat"><i class="fa fa-check"></i>Psicostat</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#collaborazione"><i class="fa fa-check"></i>Collaborazione</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#riconoscimenti"><i class="fa fa-check"></i>Riconoscimenti</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#licenza"><i class="fa fa-check"></i>Licenza</a></li>
</ul></li>
<li class="part"><span><b>Get Started</b></span></li>
<li class="chapter" data-level="" data-path="intorduzione.html"><a href="intorduzione.html"><i class="fa fa-check"></i>Intorduzione</a></li>
<li class="chapter" data-level="1" data-path="install.html"><a href="install.html"><i class="fa fa-check"></i><b>1</b> Installare R e RStudio</a><ul>
<li class="chapter" data-level="1.1" data-path="install.html"><a href="install.html#install-r"><i class="fa fa-check"></i><b>1.1</b> Installare R</a><ul>
<li class="chapter" data-level="1.1.1" data-path="install.html"><a href="install.html#r-windows"><i class="fa fa-check"></i><b>1.1.1</b> R Windows</a></li>
<li class="chapter" data-level="1.1.2" data-path="install.html"><a href="install.html#r-macos"><i class="fa fa-check"></i><b>1.1.2</b> R MacOS</a></li>
<li class="chapter" data-level="1.1.3" data-path="install.html"><a href="install.html#r-linux"><i class="fa fa-check"></i><b>1.1.3</b> R Linux</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="install.html"><a href="install.html#installare-r-studio"><i class="fa fa-check"></i><b>1.2</b> Installare R Studio</a><ul>
<li class="chapter" data-level="1.2.1" data-path="install.html"><a href="install.html#r-studio-in-linux"><i class="fa fa-check"></i><b>1.2.1</b> R Studio in Linux</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="rstudio-gui.html"><a href="rstudio-gui.html"><i class="fa fa-check"></i><b>2</b> Interfaccia RStudio</a></li>
<li class="chapter" data-level="3" data-path="first-comands.html"><a href="first-comands.html"><i class="fa fa-check"></i><b>3</b> Primi Passi in R</a><ul>
<li class="chapter" data-level="3.1" data-path="first-comands.html"><a href="first-comands.html#math-operators"><i class="fa fa-check"></i><b>3.1</b> Operatori Matematici</a><ul>
<li class="chapter" data-level="3.1.1" data-path="first-comands.html"><a href="first-comands.html#ordine-operazioni"><i class="fa fa-check"></i><b>3.1.1</b> Ordine Operazioni</a></li>
<li class="chapter" data-level="" data-path="first-comands.html"><a href="first-comands.html#esercizi"><i class="fa fa-check"></i>Esercizi</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="first-comands.html"><a href="first-comands.html#operators-rel-log"><i class="fa fa-check"></i><b>3.2</b> Operatori Relazionali e Logici</a><ul>
<li class="chapter" data-level="3.2.1" data-path="first-comands.html"><a href="first-comands.html#operatori-relazionali"><i class="fa fa-check"></i><b>3.2.1</b> Operatori Relazionali</a></li>
<li class="chapter" data-level="3.2.2" data-path="first-comands.html"><a href="first-comands.html#operatori-logici"><i class="fa fa-check"></i><b>3.2.2</b> Operatori Logici</a></li>
<li class="chapter" data-level="3.2.3" data-path="first-comands.html"><a href="first-comands.html#ordine-valutazione-relazioni"><i class="fa fa-check"></i><b>3.2.3</b> Ordine valutazione relazioni</a></li>
<li class="chapter" data-level="" data-path="first-comands.html"><a href="first-comands.html#esercizi-1"><i class="fa fa-check"></i>Esercizi</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="objects-functions.html"><a href="objects-functions.html"><i class="fa fa-check"></i><b>4</b> Due Compagni Inseparabili</a><ul>
<li class="chapter" data-level="4.1" data-path="objects-functions.html"><a href="objects-functions.html#objects-section"><i class="fa fa-check"></i><b>4.1</b> Oggetti</a><ul>
<li class="chapter" data-level="4.1.1" data-path="objects-functions.html"><a href="objects-functions.html#assegnare-e-richiamare-un-oggetto"><i class="fa fa-check"></i><b>4.1.1</b> Assegnare e Richiamare un oggetto</a></li>
<li class="chapter" data-level="4.1.2" data-path="objects-functions.html"><a href="objects-functions.html#objects-names"><i class="fa fa-check"></i><b>4.1.2</b> Nomi degli oggetti</a></li>
<li class="chapter" data-level="4.1.3" data-path="objects-functions.html"><a href="objects-functions.html#tipologie-dati-e-strutture-dati"><i class="fa fa-check"></i><b>4.1.3</b> Tipologie Dati e Strutture Dati</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="objects-functions.html"><a href="objects-functions.html#functions-def"><i class="fa fa-check"></i><b>4.2</b> Funzioni</a><ul>
<li class="chapter" data-level="4.2.1" data-path="objects-functions.html"><a href="objects-functions.html#function-arguments"><i class="fa fa-check"></i><b>4.2.1</b> Argomenti di una Funzione</a></li>
<li class="chapter" data-level="4.2.2" data-path="objects-functions.html"><a href="objects-functions.html#help-i-need-somebodyhelp"><i class="fa fa-check"></i><b>4.2.2</b> Help! I need Somebody…Help!</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="working-environment.html"><a href="working-environment.html"><i class="fa fa-check"></i><b>5</b> Ambiente di Lavoro</a><ul>
<li class="chapter" data-level="5.1" data-path="working-environment.html"><a href="working-environment.html#environment"><i class="fa fa-check"></i><b>5.1</b> Environment</a><ul>
<li class="chapter" data-level="5.1.1" data-path="working-environment.html"><a href="working-environment.html#aggiungere-oggetti-allenvironment"><i class="fa fa-check"></i><b>5.1.1</b> Aggiungere Oggetti all’Environment</a></li>
<li class="chapter" data-level="5.1.2" data-path="working-environment.html"><a href="working-environment.html#rimuovere-oggetti-dallenvironment"><i class="fa fa-check"></i><b>5.1.2</b> Rimuovere Oggetti dall’Environment</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="working-environment.html"><a href="working-environment.html#working-directory"><i class="fa fa-check"></i><b>5.2</b> Working Directory</a><ul>
<li class="chapter" data-level="5.2.1" data-path="working-environment.html"><a href="working-environment.html#organizzazione-computer"><i class="fa fa-check"></i><b>5.2.1</b> Organizzazione Computer</a></li>
<li class="chapter" data-level="5.2.2" data-path="working-environment.html"><a href="working-environment.html#absolute-path-e-relative-path"><i class="fa fa-check"></i><b>5.2.2</b> Absolute Path e Relative Path</a></li>
<li class="chapter" data-level="5.2.3" data-path="working-environment.html"><a href="working-environment.html#working-directory-in-r"><i class="fa fa-check"></i><b>5.2.3</b> Working Directory in R</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="working-environment.html"><a href="working-environment.html#packages"><i class="fa fa-check"></i><b>5.3</b> R-packages</a><ul>
<li class="chapter" data-level="5.3.1" data-path="working-environment.html"><a href="working-environment.html#install.packages"><i class="fa fa-check"></i><b>5.3.1</b> install.packages()</a></li>
<li class="chapter" data-level="5.3.2" data-path="working-environment.html"><a href="working-environment.html#library"><i class="fa fa-check"></i><b>5.3.2</b> library()</a></li>
<li class="chapter" data-level="5.3.3" data-path="working-environment.html"><a href="working-environment.html#aggiornare-e-rimuovere-pacchetti"><i class="fa fa-check"></i><b>5.3.3</b> Aggiornare e Rimuovere Pacchetti</a></li>
<li class="chapter" data-level="5.3.4" data-path="working-environment.html"><a href="working-environment.html#documentazione-pacchetti"><i class="fa fa-check"></i><b>5.3.4</b> Documentazione Pacchetti</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="working-session.html"><a href="working-session.html"><i class="fa fa-check"></i><b>6</b> Sessione di Lavoro</a><ul>
<li class="chapter" data-level="6.1" data-path="working-session.html"><a href="working-session.html#organizzazione-script"><i class="fa fa-check"></i><b>6.1</b> Organizzazione Script</a><ul>
<li class="chapter" data-level="6.1.1" data-path="working-session.html"><a href="working-session.html#creare-delle-sezioni"><i class="fa fa-check"></i><b>6.1.1</b> Creare delle Sezioni</a></li>
<li class="chapter" data-level="6.1.2" data-path="working-session.html"><a href="working-session.html#sintassi"><i class="fa fa-check"></i><b>6.1.2</b> Sintassi</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="working-session.html"><a href="working-session.html#r-projects"><i class="fa fa-check"></i><b>6.2</b> R projects</a><ul>
<li class="chapter" data-level="6.2.1" data-path="working-session.html"><a href="working-session.html#più-di-uno-script"><i class="fa fa-check"></i><b>6.2.1</b> Più di uno script</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="working-session.html"><a href="working-session.html#messages-warnings-e-errors"><i class="fa fa-check"></i><b>6.3</b> Messages, Warnings e Errors</a><ul>
<li class="chapter" data-level="6.3.1" data-path="working-session.html"><a href="working-session.html#risolvere-gli-errori"><i class="fa fa-check"></i><b>6.3.1</b> Risolvere gli Errori</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Struttura Dati</b></span></li>
<li class="chapter" data-level="" data-path="introduzione.html"><a href="introduzione.html"><i class="fa fa-check"></i>Introduzione</a></li>
<li class="chapter" data-level="7" data-path="vector.html"><a href="vector.html"><i class="fa fa-check"></i><b>7</b> Vettori</a><ul>
<li class="chapter" data-level="7.1" data-path="vector.html"><a href="vector.html#creazione"><i class="fa fa-check"></i><b>7.1</b> Creazione</a><ul>
<li class="chapter" data-level="" data-path="vector.html"><a href="vector.html#esercizi-2"><i class="fa fa-check"></i>Esercizi</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="vector.html"><a href="vector.html#selezione-elementi"><i class="fa fa-check"></i><b>7.2</b> Selezione Elementi</a><ul>
<li class="chapter" data-level="7.2.1" data-path="vector.html"><a href="vector.html#utilizzi-avanzati-selezione"><i class="fa fa-check"></i><b>7.2.1</b> Utilizzi Avanzati Selezione</a></li>
<li class="chapter" data-level="" data-path="vector.html"><a href="vector.html#esercizi-3"><i class="fa fa-check"></i>Esercizi</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="vector.html"><a href="vector.html#funzioni-ed-operazioni"><i class="fa fa-check"></i><b>7.3</b> Funzioni ed Operazioni</a><ul>
<li class="chapter" data-level="" data-path="vector.html"><a href="vector.html#esercizi-4"><i class="fa fa-check"></i>Esercizi</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="vector.html"><a href="vector.html#data-type"><i class="fa fa-check"></i><b>7.4</b> Data Type</a><ul>
<li class="chapter" data-level="7.4.1" data-path="vector.html"><a href="vector.html#character"><i class="fa fa-check"></i><b>7.4.1</b> Character</a></li>
<li class="chapter" data-level="7.4.2" data-path="vector.html"><a href="vector.html#numeric"><i class="fa fa-check"></i><b>7.4.2</b> Numeric</a></li>
<li class="chapter" data-level="7.4.3" data-path="vector.html"><a href="vector.html#integer"><i class="fa fa-check"></i><b>7.4.3</b> Integer</a></li>
<li class="chapter" data-level="7.4.4" data-path="vector.html"><a href="vector.html#logical"><i class="fa fa-check"></i><b>7.4.4</b> Logical</a></li>
<li class="chapter" data-level="7.4.5" data-path="vector.html"><a href="vector.html#valori-speciali"><i class="fa fa-check"></i><b>7.4.5</b> Valori speciali</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="factors.html"><a href="factors.html"><i class="fa fa-check"></i><b>8</b> Fattori</a><ul>
<li class="chapter" data-level="" data-path="factors.html"><a href="factors.html#esercizi-5"><i class="fa fa-check"></i>Esercizi</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="matrix.html"><a href="matrix.html"><i class="fa fa-check"></i><b>9</b> Matrici</a><ul>
<li class="chapter" data-level="9.1" data-path="matrix.html"><a href="matrix.html#creazione-di-una-matrice"><i class="fa fa-check"></i><b>9.1</b> Creazione di una matrice</a><ul>
<li class="chapter" data-level="" data-path="matrix.html"><a href="matrix.html#esercizi-6"><i class="fa fa-check"></i>Esercizi</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="matrix.html"><a href="matrix.html#mat-prop"><i class="fa fa-check"></i><b>9.2</b> Proprietà della matrice</a></li>
<li class="chapter" data-level="9.3" data-path="matrix.html"><a href="matrix.html#indicizzazione-di-matrici"><i class="fa fa-check"></i><b>9.3</b> Indicizzazione di matrici</a></li>
<li class="chapter" data-level="9.4" data-path="matrix.html"><a href="matrix.html#indicizzazione-avanzata"><i class="fa fa-check"></i><b>9.4</b> Indicizzazione avanzata</a></li>
<li class="chapter" data-level="9.5" data-path="matrix.html"><a href="matrix.html#combinare-matrici"><i class="fa fa-check"></i><b>9.5</b> Combinare matrici</a><ul>
<li class="chapter" data-level="" data-path="matrix.html"><a href="matrix.html#esercizi-7"><i class="fa fa-check"></i>Esercizi</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="dataframe.html"><a href="dataframe.html"><i class="fa fa-check"></i><b>10</b> Dataframe</a><ul>
<li class="chapter" data-level="10.1" data-path="dataframe.html"><a href="dataframe.html#creazione-di-un-dataframe"><i class="fa fa-check"></i><b>10.1</b> Creazione di un dataframe</a><ul>
<li class="chapter" data-level="" data-path="dataframe.html"><a href="dataframe.html#esercizi-8"><i class="fa fa-check"></i>Esercizi</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="dataframe.html"><a href="dataframe.html#proprietà-di-un-dataframe"><i class="fa fa-check"></i><b>10.2</b> Proprietà di un dataframe</a></li>
<li class="chapter" data-level="10.3" data-path="dataframe.html"><a href="dataframe.html#indicizzazione-di-dataframe"><i class="fa fa-check"></i><b>10.3</b> Indicizzazione di dataframe</a></li>
<li class="chapter" data-level="10.4" data-path="dataframe.html"><a href="dataframe.html#indicizzazione-avanzata-1"><i class="fa fa-check"></i><b>10.4</b> Indicizzazione avanzata</a><ul>
<li class="chapter" data-level="" data-path="dataframe.html"><a href="dataframe.html#esercizi-9"><i class="fa fa-check"></i>Esercizi</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="list.html"><a href="list.html"><i class="fa fa-check"></i><b>11</b> Liste</a><ul>
<li class="chapter" data-level="11.1" data-path="list.html"><a href="list.html#creazione-di-liste"><i class="fa fa-check"></i><b>11.1</b> Creazione di Liste</a><ul>
<li class="chapter" data-level="" data-path="list.html"><a href="list.html#esercizi-10"><i class="fa fa-check"></i>Esercizi</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="list.html"><a href="list.html#selezione-di-elementi-di-una-lista"><i class="fa fa-check"></i><b>11.2</b> Selezione di Elementi di una Lista</a><ul>
<li class="chapter" data-level="" data-path="list.html"><a href="list.html#esercizi-11"><i class="fa fa-check"></i>Esercizi</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Algoritmi</b></span></li>
<li class="chapter" data-level="" data-path="introduzione-1.html"><a href="introduzione-1.html"><i class="fa fa-check"></i>Introduzione</a></li>
<li class="chapter" data-level="12" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>12</b> Definizione di Funzioni</a></li>
<li class="chapter" data-level="13" data-path="coditionals.html"><a href="coditionals.html"><i class="fa fa-check"></i><b>13</b> Programmazione Condizionale</a></li>
<li class="chapter" data-level="14" data-path="loop.html"><a href="loop.html"><i class="fa fa-check"></i><b>14</b> Attenti al loop</a></li>
<li class="part"><span><b>Case study</b></span></li>
<li class="chapter" data-level="" data-path="introduzione-2.html"><a href="introduzione-2.html"><i class="fa fa-check"></i>Introduzione</a></li>
<li class="chapter" data-level="15" data-path="attachment.html"><a href="attachment.html"><i class="fa fa-check"></i><b>15</b> Caso Studio I: Attaccamento</a><ul>
<li class="chapter" data-level="15.1" data-path="attachment.html"><a href="attachment.html#infobox"><i class="fa fa-check"></i><b>15.1</b> Infobox</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"><span style="font-size: 2.5em">Introduction to R</span></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<head>
  <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=10.0,initial-scale=1.0">
  <!--script src="https://kit.fontawesome.com/6a26f47516.js"></script-->
  <script src="assets/hideOutput.js"></script>
  <link href="assets/style.css" rel="stylesheet">
</head>



<div class="hero-image-container">
  <img class= "hero-image" src="images/banner.png">
</div>
<div id="dataframe" class="section level1">
<h1><span class="header-section-number">Capitolo 10</span> Dataframe</h1>
<p>Il <code>dataframe</code> è uno degli oggetti più interessanti ed anche utilizzati del linguaggio R. Inoltre, se vi capiterà di utilizzare altri linguaggi di programmazione sopratutto mirati all’analisi dati (Matlab ad esempio) noterete come vi mancherà un oggetto potente e intuitivo come il dataframe.</p>
<p>Come vedremo ci sono molte somiglianze tra il <code>dataframe</code> e la <code>matrice</code>. Quando necessario, si farà riferimento al capitolo precedente per far notare quali aspetti sono in comune tra queste due strutture di dati.</p>
<p>Il <code>dataframe</code> come dice il nome fa riferimento ad una struttura per i dati. Dati in questo caso è volutamente generico perchè il dataframe rispetto alla matrice può contenere nello stesso oggetto, tipi diversi di dato come fattori, caratteri e numeri. Può essere utile pensare al dataframe esattamente come ad una normale tabella che si può creare un un foglio di calcolo (Excel) dove possiamo mettere <em>nomi</em>, <em>date</em>, <em>numeri</em>, etc.</p>
<p>La struttura di base di un dataframe è quindi la stessa di una matrice ma contiene i nomi delle colonne (e anche delle righe eventualmente) di default. Un esempio di dataframe è rappresentato nella tabella <a href="dataframe.html#tab:ex-dataframe">10.1</a></p>
<!-- TODO fare meglio la tabella -->
<table class="table table-striped table-hover table-condensed" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:ex-dataframe">Table 10.1: </span>Esempio di dataframe
</caption>
<thead>
<tr>
<th style="text-align:center;">
colonna1
</th>
<th style="text-align:center;">
colonna2
</th>
<th style="text-align:center;">
colonna3
</th>
<th style="text-align:center;">
colonna4
</th>
<th style="text-align:center;">
colonna5
</th>
<th style="text-align:center;">
colonna6
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
-1.34
</td>
<td style="text-align:center;">
0.73
</td>
<td style="text-align:center;">
1.26
</td>
<td style="text-align:center;">
0.26
</td>
<td style="text-align:center;">
-1.29
</td>
<td style="text-align:center;">
a
</td>
</tr>
<tr>
<td style="text-align:center;">
-0.48
</td>
<td style="text-align:center;">
0.82
</td>
<td style="text-align:center;">
-0.07
</td>
<td style="text-align:center;">
1.06
</td>
<td style="text-align:center;">
-1.85
</td>
<td style="text-align:center;">
b
</td>
</tr>
<tr>
<td style="text-align:center;">
-1.69
</td>
<td style="text-align:center;">
-2.75
</td>
<td style="text-align:center;">
0.25
</td>
<td style="text-align:center;">
-0.59
</td>
<td style="text-align:center;">
-0.77
</td>
<td style="text-align:center;">
c
</td>
</tr>
<tr>
<td style="text-align:center;">
-0.98
</td>
<td style="text-align:center;">
-0.37
</td>
<td style="text-align:center;">
0.25
</td>
<td style="text-align:center;">
-1.59
</td>
<td style="text-align:center;">
-0.54
</td>
<td style="text-align:center;">
d
</td>
</tr>
<tr>
<td style="text-align:center;">
1.12
</td>
<td style="text-align:center;">
0.30
</td>
<td style="text-align:center;">
0.34
</td>
<td style="text-align:center;">
0.72
</td>
<td style="text-align:center;">
1.00
</td>
<td style="text-align:center;">
e
</td>
</tr>
<tr>
<td style="text-align:center;">
-0.52
</td>
<td style="text-align:center;">
0.27
</td>
<td style="text-align:center;">
0.55
</td>
<td style="text-align:center;">
-0.38
</td>
<td style="text-align:center;">
1.39
</td>
<td style="text-align:center;">
f
</td>
</tr>
<tr>
<td style="text-align:center;">
1.30
</td>
<td style="text-align:center;">
-1.27
</td>
<td style="text-align:center;">
0.64
</td>
<td style="text-align:center;">
-0.43
</td>
<td style="text-align:center;">
-1.26
</td>
<td style="text-align:center;">
g
</td>
</tr>
<tr>
<td style="text-align:center;">
0.70
</td>
<td style="text-align:center;">
1.47
</td>
<td style="text-align:center;">
1.45
</td>
<td style="text-align:center;">
0.07
</td>
<td style="text-align:center;">
0.23
</td>
<td style="text-align:center;">
h
</td>
</tr>
<tr>
<td style="text-align:center;">
-0.62
</td>
<td style="text-align:center;">
-1.38
</td>
<td style="text-align:center;">
-0.30
</td>
<td style="text-align:center;">
-0.34
</td>
<td style="text-align:center;">
-0.28
</td>
<td style="text-align:center;">
i
</td>
</tr>
<tr>
<td style="text-align:center;">
0.61
</td>
<td style="text-align:center;">
-0.35
</td>
<td style="text-align:center;">
-0.26
</td>
<td style="text-align:center;">
-0.55
</td>
<td style="text-align:center;">
-0.40
</td>
<td style="text-align:center;">
j
</td>
</tr>
</tbody>
</table>
<p>Come si vede abbiamo colonne con un nome che contengono sia numeri che caratteri. Questo non era chiaramente possibile con le matrici.</p>
<div id="creazione-di-un-dataframe" class="section level2">
<h2><span class="header-section-number">10.1</span> Creazione di un dataframe</h2>
<p>Il comando per creare un dataframe è il comando <code>data.frame()</code> tuttavia la creazione è leggermente diversa rispetto alla matrice. Pensando all’analogia con il foglio di calcolo Excel, intuitivamente è più facile immaginare la creazione di una dataframe mettendo insieme colonne relativamente indipendenti (dove una può contenere dei nomi, un’altra delle date e così via) piuttosto che un insieme di numeri inseriti per riga o per colonna come per le matrici.</p>
<p>Infatti il modo di creare un <code>dataframe</code> è priprio questo ovvero specificando <code>nomecolonna = valori</code> all’interno del comando <code>data.frame()</code>. Vediamo un esempio in R:</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="dataframe.html#cb118-1"></a></span>
<span id="cb118-2"><a href="dataframe.html#cb118-2"></a>dat &lt;-<span class="st"> </span><span class="kw">data.frame</span>(</span>
<span id="cb118-3"><a href="dataframe.html#cb118-3"></a>  </span>
<span id="cb118-4"><a href="dataframe.html#cb118-4"></a>  <span class="dt">Id =</span> <span class="kw">c</span>(<span class="st">&quot;subj_1&quot;</span>,<span class="st">&quot;subj_2&quot;</span>,<span class="st">&quot;subj_3&quot;</span>),</span>
<span id="cb118-5"><a href="dataframe.html#cb118-5"></a>  <span class="dt">age =</span> <span class="kw">c</span>(<span class="dv">21</span>,<span class="dv">23</span>,<span class="dv">19</span>),</span>
<span id="cb118-6"><a href="dataframe.html#cb118-6"></a>  <span class="dt">sex =</span> <span class="kw">c</span>(<span class="st">&quot;F&quot;</span>,<span class="st">&quot;M&quot;</span>,<span class="st">&quot;F&quot;</span>),</span>
<span id="cb118-7"><a href="dataframe.html#cb118-7"></a>  <span class="dt">item1 =</span> <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">1</span>),</span>
<span id="cb118-8"><a href="dataframe.html#cb118-8"></a>  <span class="dt">item2 =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">2</span>,<span class="dv">1</span>),</span>
<span id="cb118-9"><a href="dataframe.html#cb118-9"></a>  <span class="dt">item3 =</span> <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">0</span>,<span class="dv">1</span>)</span>
<span id="cb118-10"><a href="dataframe.html#cb118-10"></a>  </span>
<span id="cb118-11"><a href="dataframe.html#cb118-11"></a>)</span>
<span id="cb118-12"><a href="dataframe.html#cb118-12"></a></span>
<span id="cb118-13"><a href="dataframe.html#cb118-13"></a>dat</span>
<span id="cb118-14"><a href="dataframe.html#cb118-14"></a><span class="co">##       Id age sex item1 item2 item3</span></span>
<span id="cb118-15"><a href="dataframe.html#cb118-15"></a><span class="co">## 1 subj_1  21   F     2     0     2</span></span>
<span id="cb118-16"><a href="dataframe.html#cb118-16"></a><span class="co">## 2 subj_2  23   M     1     2     0</span></span>
<span id="cb118-17"><a href="dataframe.html#cb118-17"></a><span class="co">## 3 subj_3  19   F     1     1     1</span></span></code></pre></div>
<p>In questo caso abbiamo creato un ipotetico dataframe dove in ogni riga abbiamo un soggetto e ogni colonna rappresenta una data caratteristica del soggetto come il genere, l’età e così via.</p>
<p>Un aspetto importante adesso è proprio quello che il dataframe è stato pensato per gestire dati complessi ed eterogenei come quelli che si trovano in un’analisi di dati reale. Una convenzione molto utile da ricordare infatti è quella che le righe di un dataframe rappresentano le <strong>osservazioni</strong> (ad esempio persone) e le colonne rappresentano <strong>variabili</strong> ovvero delle proprietà misurate su quelle osservazioni.</p>
<p>Una distinzione fondamentale nella pratica di analisi dei dati è quella tra dati in forma <strong>long</strong> (oppure lunga) o dati in forma <strong>wide</strong> (oppure larga). Non c’è un formato corretto o sbagliato ma dipende dal tipo di analisi e dal software o pacchetto che si utilizza. Alcune operazioni o analisi richiedono il dataset in forma <strong>long</strong> altre in forma <strong>wide</strong>. Mantenendo l’esempio di soggetti e caratteristiche misurate sui soggetti i due formati sono definiti come:</p>
<ul>
<li><strong>Wide</strong>: ogni singola riga rappresenta un soggetto e ogni sua risposta o variabile misurata sarà riportata in una diversa colonna. Il dataset creato in precedenza era infatti proprio nel formato wide:</li>
</ul>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="dataframe.html#cb119-1"></a>data_wide&lt;-<span class="kw">data.frame</span>(</span>
<span id="cb119-2"><a href="dataframe.html#cb119-2"></a>  <span class="dt">Id=</span><span class="kw">c</span>(<span class="st">&quot;subj_1&quot;</span>,<span class="st">&quot;subj_2&quot;</span>,<span class="st">&quot;subj_3&quot;</span>),</span>
<span id="cb119-3"><a href="dataframe.html#cb119-3"></a>  <span class="dt">age=</span><span class="kw">c</span>(<span class="dv">21</span>,<span class="dv">23</span>,<span class="dv">19</span>),</span>
<span id="cb119-4"><a href="dataframe.html#cb119-4"></a>  <span class="dt">sex=</span><span class="kw">c</span>(<span class="st">&quot;F&quot;</span>,<span class="st">&quot;M&quot;</span>,<span class="st">&quot;F&quot;</span>),</span>
<span id="cb119-5"><a href="dataframe.html#cb119-5"></a>  <span class="dt">item_1=</span><span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">1</span>),</span>
<span id="cb119-6"><a href="dataframe.html#cb119-6"></a>  <span class="dt">item_2=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">2</span>,<span class="dv">1</span>),</span>
<span id="cb119-7"><a href="dataframe.html#cb119-7"></a>  <span class="dt">item_3=</span><span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">0</span>,<span class="dv">1</span>)</span>
<span id="cb119-8"><a href="dataframe.html#cb119-8"></a>  )</span>
<span id="cb119-9"><a href="dataframe.html#cb119-9"></a></span>
<span id="cb119-10"><a href="dataframe.html#cb119-10"></a>data_wide</span>
<span id="cb119-11"><a href="dataframe.html#cb119-11"></a><span class="co">##       Id age sex item_1 item_2 item_3</span></span>
<span id="cb119-12"><a href="dataframe.html#cb119-12"></a><span class="co">## 1 subj_1  21   F      2      0      2</span></span>
<span id="cb119-13"><a href="dataframe.html#cb119-13"></a><span class="co">## 2 subj_2  23   M      1      2      0</span></span>
<span id="cb119-14"><a href="dataframe.html#cb119-14"></a><span class="co">## 3 subj_3  19   F      1      1      1</span></span></code></pre></div>
<ul>
<li><strong>Long</strong>: ogni singola riga rappresenta una singola osservazione. Quindi i dati di ogni soggetto saranno riportati su più righe e le variabili che non cambiano tra le osservazioni saranno ripetute.</li>
</ul>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="dataframe.html#cb120-1"></a>data_long&lt;-<span class="kw">data.frame</span>(<span class="dt">Id=</span><span class="kw">rep</span>(<span class="kw">c</span>(<span class="st">&quot;subj_1&quot;</span>,<span class="st">&quot;subj_2&quot;</span>,<span class="st">&quot;subj_3&quot;</span>),<span class="dt">each=</span><span class="dv">3</span>),</span>
<span id="cb120-2"><a href="dataframe.html#cb120-2"></a>                      <span class="dt">age=</span><span class="kw">rep</span>(<span class="kw">c</span>(<span class="dv">21</span>,<span class="dv">23</span>,<span class="dv">19</span>),<span class="dt">each=</span><span class="dv">3</span>),</span>
<span id="cb120-3"><a href="dataframe.html#cb120-3"></a>                      <span class="dt">sex=</span><span class="kw">rep</span>(<span class="kw">c</span>(<span class="st">&quot;F&quot;</span>,<span class="st">&quot;M&quot;</span>,<span class="st">&quot;F&quot;</span>),<span class="dt">each=</span><span class="dv">3</span>),</span>
<span id="cb120-4"><a href="dataframe.html#cb120-4"></a>                      <span class="dt">item=</span><span class="kw">rep</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>,<span class="dv">3</span>),</span>
<span id="cb120-5"><a href="dataframe.html#cb120-5"></a>                      <span class="dt">response=</span><span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">0</span>,<span class="dv">1</span>))</span>
<span id="cb120-6"><a href="dataframe.html#cb120-6"></a>data_long</span>
<span id="cb120-7"><a href="dataframe.html#cb120-7"></a><span class="co">##       Id age sex item response</span></span>
<span id="cb120-8"><a href="dataframe.html#cb120-8"></a><span class="co">## 1 subj_1  21   F    1        2</span></span>
<span id="cb120-9"><a href="dataframe.html#cb120-9"></a><span class="co">## 2 subj_1  21   F    2        1</span></span>
<span id="cb120-10"><a href="dataframe.html#cb120-10"></a><span class="co">## 3 subj_1  21   F    3        1</span></span>
<span id="cb120-11"><a href="dataframe.html#cb120-11"></a><span class="co">## 4 subj_2  23   M    1        0</span></span>
<span id="cb120-12"><a href="dataframe.html#cb120-12"></a><span class="co">## 5 subj_2  23   M    2        2</span></span>
<span id="cb120-13"><a href="dataframe.html#cb120-13"></a><span class="co">## 6 subj_2  23   M    3        1</span></span>
<span id="cb120-14"><a href="dataframe.html#cb120-14"></a><span class="co">## 7 subj_3  19   F    1        2</span></span>
<span id="cb120-15"><a href="dataframe.html#cb120-15"></a><span class="co">## 8 subj_3  19   F    2        0</span></span>
<span id="cb120-16"><a href="dataframe.html#cb120-16"></a><span class="co">## 9 subj_3  19   F    3        1</span></span></code></pre></div>
<p>Come potete vedere, nel dataset in forma <strong>long</strong> ogni soggetto ha 3 righe perchè oltre al genere e l’età che sono uniche, ci sono 3 variabili diverse misurate sulla stessa persona.</p>
<div class="tip" title="Long o Wide?">
<p>I dati in forma long e wide hanno delle proprietà diverse sopratutto in riferimento all’utilizzo. La tipologia di dato e il risultato finale è esattamente lo stesso tuttavia alcuni software o alcuni pacchetti di R funzionano solo con dataset organizzati in un certo modo.
Il consiglio però è di abituarsi il più possibile a ragionare in forma <strong>long</strong> perchè la maggior parte dei moderni pacchetti per l’analisi dati e per la creazione di grafici richiedono i dati in questo formato. Ci sono comunque delle funzioni (più avanzate) per passare velocemente da un formato all’altro.</p>
</div>
<p>Come per le <code>matrici</code>, anche i dataframe richiedono che tutte le colonne (variabili) abbiano lo stesso numero di elementi.</p>
<p><strong>Nota:</strong> di default R considera una variabile stringa all’interno di un DataFrame come una variabile categoriale. E’ possibile cambiare questa opzione specificando <code>stringsAsFactors=FALSE</code>.</p>
<div id="esercizi-8" class="section level3 unnumbered">
<h3>Esercizi</h3>
<ol style="list-style-type: decimal">
<li>Crea il dataframe <code>data_wide</code> riportato precedentemente</li>
<li>Crea il dataframe <code>data_long</code> riportato precedentemente</li>
</ol>
</div>
</div>
<div id="proprietà-di-un-dataframe" class="section level2">
<h2><span class="header-section-number">10.2</span> Proprietà di un dataframe</h2>
<p>In modo simile alle matrici, i dataframe contengono dei metadati per assegnare dei nomi alle righe <code>rownames()</code> e alle colonne <code>colnames()</code>. Inoltre il dataframe ha una dimensione intesa come numero di righe e colonne esattamente come la matrice. Di default il dataframe richiede dei nomi solo alle colonne ma è possibile anche nominare le righe. Utilizzando il dataframe precedente:</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="dataframe.html#cb121-1"></a>data_long</span>
<span id="cb121-2"><a href="dataframe.html#cb121-2"></a><span class="co">##       Id age sex item response</span></span>
<span id="cb121-3"><a href="dataframe.html#cb121-3"></a><span class="co">## 1 subj_1  21   F    1        2</span></span>
<span id="cb121-4"><a href="dataframe.html#cb121-4"></a><span class="co">## 2 subj_1  21   F    2        1</span></span>
<span id="cb121-5"><a href="dataframe.html#cb121-5"></a><span class="co">## 3 subj_1  21   F    3        1</span></span>
<span id="cb121-6"><a href="dataframe.html#cb121-6"></a><span class="co">## 4 subj_2  23   M    1        0</span></span>
<span id="cb121-7"><a href="dataframe.html#cb121-7"></a><span class="co">## 5 subj_2  23   M    2        2</span></span>
<span id="cb121-8"><a href="dataframe.html#cb121-8"></a><span class="co">## 6 subj_2  23   M    3        1</span></span>
<span id="cb121-9"><a href="dataframe.html#cb121-9"></a><span class="co">## 7 subj_3  19   F    1        2</span></span>
<span id="cb121-10"><a href="dataframe.html#cb121-10"></a><span class="co">## 8 subj_3  19   F    2        0</span></span>
<span id="cb121-11"><a href="dataframe.html#cb121-11"></a><span class="co">## 9 subj_3  19   F    3        1</span></span>
<span id="cb121-12"><a href="dataframe.html#cb121-12"></a></span>
<span id="cb121-13"><a href="dataframe.html#cb121-13"></a><span class="co"># Controllo dei nomi</span></span>
<span id="cb121-14"><a href="dataframe.html#cb121-14"></a></span>
<span id="cb121-15"><a href="dataframe.html#cb121-15"></a><span class="kw">rownames</span>(data_long)</span>
<span id="cb121-16"><a href="dataframe.html#cb121-16"></a><span class="co">## [1] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; &quot;5&quot; &quot;6&quot; &quot;7&quot; &quot;8&quot; &quot;9&quot;</span></span>
<span id="cb121-17"><a href="dataframe.html#cb121-17"></a><span class="kw">colnames</span>(data_long)</span>
<span id="cb121-18"><a href="dataframe.html#cb121-18"></a><span class="co">## [1] &quot;Id&quot;       &quot;age&quot;      &quot;sex&quot;      &quot;item&quot;     &quot;response&quot;</span></span>
<span id="cb121-19"><a href="dataframe.html#cb121-19"></a><span class="kw">names</span>(data_long) <span class="co"># nel caso dei dataframe questo è analogo a colnames()</span></span>
<span id="cb121-20"><a href="dataframe.html#cb121-20"></a><span class="co">## [1] &quot;Id&quot;       &quot;age&quot;      &quot;sex&quot;      &quot;item&quot;     &quot;response&quot;</span></span>
<span id="cb121-21"><a href="dataframe.html#cb121-21"></a></span>
<span id="cb121-22"><a href="dataframe.html#cb121-22"></a><span class="co"># Dimensioni</span></span>
<span id="cb121-23"><a href="dataframe.html#cb121-23"></a></span>
<span id="cb121-24"><a href="dataframe.html#cb121-24"></a><span class="kw">nrow</span>(data_long)</span>
<span id="cb121-25"><a href="dataframe.html#cb121-25"></a><span class="co">## [1] 9</span></span>
<span id="cb121-26"><a href="dataframe.html#cb121-26"></a><span class="kw">ncol</span>(data_long)</span>
<span id="cb121-27"><a href="dataframe.html#cb121-27"></a><span class="co">## [1] 5</span></span></code></pre></div>
</div>
<div id="indicizzazione-di-dataframe" class="section level2">
<h2><span class="header-section-number">10.3</span> Indicizzazione di dataframe</h2>
<p>Ancora di più che per le matrici, è nell’indicizzazione che si vede la vera potenza dei dataframe. Rimandendo su un’indicizzazione tramiti indici di riga e colonna il funzionamento è esattamente analogo a quello della matrice, quindi <code>dataframe[riga, colonna]</code>:</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="dataframe.html#cb122-1"></a>data_long</span>
<span id="cb122-2"><a href="dataframe.html#cb122-2"></a><span class="co">##       Id age sex item response</span></span>
<span id="cb122-3"><a href="dataframe.html#cb122-3"></a><span class="co">## 1 subj_1  21   F    1        2</span></span>
<span id="cb122-4"><a href="dataframe.html#cb122-4"></a><span class="co">## 2 subj_1  21   F    2        1</span></span>
<span id="cb122-5"><a href="dataframe.html#cb122-5"></a><span class="co">## 3 subj_1  21   F    3        1</span></span>
<span id="cb122-6"><a href="dataframe.html#cb122-6"></a><span class="co">## 4 subj_2  23   M    1        0</span></span>
<span id="cb122-7"><a href="dataframe.html#cb122-7"></a><span class="co">## 5 subj_2  23   M    2        2</span></span>
<span id="cb122-8"><a href="dataframe.html#cb122-8"></a><span class="co">## 6 subj_2  23   M    3        1</span></span>
<span id="cb122-9"><a href="dataframe.html#cb122-9"></a><span class="co">## 7 subj_3  19   F    1        2</span></span>
<span id="cb122-10"><a href="dataframe.html#cb122-10"></a><span class="co">## 8 subj_3  19   F    2        0</span></span>
<span id="cb122-11"><a href="dataframe.html#cb122-11"></a><span class="co">## 9 subj_3  19   F    3        1</span></span>
<span id="cb122-12"><a href="dataframe.html#cb122-12"></a></span>
<span id="cb122-13"><a href="dataframe.html#cb122-13"></a><span class="co"># Seleziono 1 riga e 4 colonna</span></span>
<span id="cb122-14"><a href="dataframe.html#cb122-14"></a></span>
<span id="cb122-15"><a href="dataframe.html#cb122-15"></a>data_long[<span class="dv">1</span>,<span class="dv">4</span>]</span>
<span id="cb122-16"><a href="dataframe.html#cb122-16"></a><span class="co">## [1] 1</span></span>
<span id="cb122-17"><a href="dataframe.html#cb122-17"></a></span>
<span id="cb122-18"><a href="dataframe.html#cb122-18"></a><span class="co"># Seleziono 1 riga e tutte le colonne</span></span>
<span id="cb122-19"><a href="dataframe.html#cb122-19"></a></span>
<span id="cb122-20"><a href="dataframe.html#cb122-20"></a>data_long[<span class="dv">1</span>, ]</span>
<span id="cb122-21"><a href="dataframe.html#cb122-21"></a><span class="co">##       Id age sex item response</span></span>
<span id="cb122-22"><a href="dataframe.html#cb122-22"></a><span class="co">## 1 subj_1  21   F    1        2</span></span>
<span id="cb122-23"><a href="dataframe.html#cb122-23"></a></span>
<span id="cb122-24"><a href="dataframe.html#cb122-24"></a><span class="co"># Seleziono righe 1 e 3 e tutte le colonne</span></span>
<span id="cb122-25"><a href="dataframe.html#cb122-25"></a></span>
<span id="cb122-26"><a href="dataframe.html#cb122-26"></a>data_long[<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">3</span>), ]</span>
<span id="cb122-27"><a href="dataframe.html#cb122-27"></a><span class="co">##       Id age sex item response</span></span>
<span id="cb122-28"><a href="dataframe.html#cb122-28"></a><span class="co">## 1 subj_1  21   F    1        2</span></span>
<span id="cb122-29"><a href="dataframe.html#cb122-29"></a><span class="co">## 3 subj_1  21   F    3        1</span></span></code></pre></div>
<p>La reale differenza tra matrici e dataframe sta nel poter accedere direttamente alle colonne tramite il loro nome e utilizzando l’operatore <code>$</code>. Con la scrittura <code>dataframe$nomevariabile</code> accediamo direttamente a quella specifica colonna senza utilizzare indici e parentesi quadre.</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="dataframe.html#cb123-1"></a></span>
<span id="cb123-2"><a href="dataframe.html#cb123-2"></a><span class="co"># Seleziono la variabile ID (soggetto)</span></span>
<span id="cb123-3"><a href="dataframe.html#cb123-3"></a>data_long<span class="op">$</span>Id</span>
<span id="cb123-4"><a href="dataframe.html#cb123-4"></a><span class="co">## [1] &quot;subj_1&quot; &quot;subj_1&quot; &quot;subj_1&quot; &quot;subj_2&quot; &quot;subj_2&quot; &quot;subj_2&quot; &quot;subj_3&quot; &quot;subj_3&quot;</span></span>
<span id="cb123-5"><a href="dataframe.html#cb123-5"></a><span class="co">## [9] &quot;subj_3&quot;</span></span>
<span id="cb123-6"><a href="dataframe.html#cb123-6"></a></span>
<span id="cb123-7"><a href="dataframe.html#cb123-7"></a><span class="co"># Seleziono la variabile Sex</span></span>
<span id="cb123-8"><a href="dataframe.html#cb123-8"></a>data_long<span class="op">$</span>sex</span>
<span id="cb123-9"><a href="dataframe.html#cb123-9"></a><span class="co">## [1] &quot;F&quot; &quot;F&quot; &quot;F&quot; &quot;M&quot; &quot;M&quot; &quot;M&quot; &quot;F&quot; &quot;F&quot; &quot;F&quot;</span></span>
<span id="cb123-10"><a href="dataframe.html#cb123-10"></a></span>
<span id="cb123-11"><a href="dataframe.html#cb123-11"></a><span class="co"># Analogalmente</span></span>
<span id="cb123-12"><a href="dataframe.html#cb123-12"></a>data_long[, <span class="dv">1</span>] <span class="co"># seleziono id con indice di colonna</span></span>
<span id="cb123-13"><a href="dataframe.html#cb123-13"></a><span class="co">## [1] &quot;subj_1&quot; &quot;subj_1&quot; &quot;subj_1&quot; &quot;subj_2&quot; &quot;subj_2&quot; &quot;subj_2&quot; &quot;subj_3&quot; &quot;subj_3&quot;</span></span>
<span id="cb123-14"><a href="dataframe.html#cb123-14"></a><span class="co">## [9] &quot;subj_3&quot;</span></span>
<span id="cb123-15"><a href="dataframe.html#cb123-15"></a>data_long[, <span class="dv">3</span>] <span class="co"># seleziono sex con indice di colonna</span></span>
<span id="cb123-16"><a href="dataframe.html#cb123-16"></a><span class="co">## [1] &quot;F&quot; &quot;F&quot; &quot;F&quot; &quot;M&quot; &quot;M&quot; &quot;M&quot; &quot;F&quot; &quot;F&quot; &quot;F&quot;</span></span></code></pre></div>
<p>Un ulteriore differenza rispetto alle matrici è quella della <strong>combinazione di dataframe</strong> o della <strong>creazione di nuove righe o colonne</strong>. Sono sempre valide le indicazioni riguardo a <code>cbind()</code> e <code>rbind()</code> ma nel caso di nuove colonne è possibile utilizzare l’operatore <code>$</code>. Con la scrittura <code>dataframe$name &lt;- new_var</code> otteniamo che nel dataframe in oggetto ci sarà una nuova colonna chiamata <code>name</code> che prende i valori all’interno di <code>new_var</code>.</p>
<p>Attenzione che mentre la scrittura <code>dataframe$name &lt;- new_var</code> aggiunge direttamente la colonna al dataframe, usando <code>cbind()</code> dobbiamo assegnare l’operazione ad un nuovo oggetto <code>dataframe &lt;- cbind(dataframe, new_var)</code>. In quest’ultimo caso il nome della colonna sarà <code>new_var</code>. Se vogliamo anche rinominare la colonna possiamo usare la sintassi <code>cbind(dataframe, "nome" = new_var)</code> oppure chiamare l’oggetto direttamente con il nome desiderato:</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="dataframe.html#cb124-1"></a>data_wide</span>
<span id="cb124-2"><a href="dataframe.html#cb124-2"></a><span class="co">##       Id age sex item_1 item_2 item_3</span></span>
<span id="cb124-3"><a href="dataframe.html#cb124-3"></a><span class="co">## 1 subj_1  21   F      2      0      2</span></span>
<span id="cb124-4"><a href="dataframe.html#cb124-4"></a><span class="co">## 2 subj_2  23   M      1      2      0</span></span>
<span id="cb124-5"><a href="dataframe.html#cb124-5"></a><span class="co">## 3 subj_3  19   F      1      1      1</span></span>
<span id="cb124-6"><a href="dataframe.html#cb124-6"></a></span>
<span id="cb124-7"><a href="dataframe.html#cb124-7"></a><span class="co"># Aggiungiamo una colonna item4 al nostro dataset</span></span>
<span id="cb124-8"><a href="dataframe.html#cb124-8"></a></span>
<span id="cb124-9"><a href="dataframe.html#cb124-9"></a>new_var &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">7</span>)</span>
<span id="cb124-10"><a href="dataframe.html#cb124-10"></a></span>
<span id="cb124-11"><a href="dataframe.html#cb124-11"></a>data_wide<span class="op">$</span>item_<span class="dv">4</span> &lt;-<span class="st"> </span>new_var</span>
<span id="cb124-12"><a href="dataframe.html#cb124-12"></a></span>
<span id="cb124-13"><a href="dataframe.html#cb124-13"></a><span class="co"># Equivalente a</span></span>
<span id="cb124-14"><a href="dataframe.html#cb124-14"></a></span>
<span id="cb124-15"><a href="dataframe.html#cb124-15"></a>data_wide<span class="op">$</span>item_<span class="dv">4</span> &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">7</span>)</span>
<span id="cb124-16"><a href="dataframe.html#cb124-16"></a></span>
<span id="cb124-17"><a href="dataframe.html#cb124-17"></a><span class="co"># Equivalente a </span></span>
<span id="cb124-18"><a href="dataframe.html#cb124-18"></a></span>
<span id="cb124-19"><a href="dataframe.html#cb124-19"></a><span class="kw">cbind</span>(data_wide, new_var) <span class="co"># senza specificare il nome</span></span>
<span id="cb124-20"><a href="dataframe.html#cb124-20"></a><span class="co">##       Id age sex item_1 item_2 item_3 item_4 new_var</span></span>
<span id="cb124-21"><a href="dataframe.html#cb124-21"></a><span class="co">## 1 subj_1  21   F      2      0      2      3       3</span></span>
<span id="cb124-22"><a href="dataframe.html#cb124-22"></a><span class="co">## 2 subj_2  23   M      1      2      0      4       4</span></span>
<span id="cb124-23"><a href="dataframe.html#cb124-23"></a><span class="co">## 3 subj_3  19   F      1      1      1      7       7</span></span>
<span id="cb124-24"><a href="dataframe.html#cb124-24"></a><span class="kw">cbind</span>(data_wide, <span class="st">&quot;item_4&quot;</span> =<span class="st"> </span>new_var) <span class="co"># specificando anche il nome</span></span>
<span id="cb124-25"><a href="dataframe.html#cb124-25"></a><span class="co">##       Id age sex item_1 item_2 item_3 item_4 item_4</span></span>
<span id="cb124-26"><a href="dataframe.html#cb124-26"></a><span class="co">## 1 subj_1  21   F      2      0      2      3      3</span></span>
<span id="cb124-27"><a href="dataframe.html#cb124-27"></a><span class="co">## 2 subj_2  23   M      1      2      0      4      4</span></span>
<span id="cb124-28"><a href="dataframe.html#cb124-28"></a><span class="co">## 3 subj_3  19   F      1      1      1      7      7</span></span></code></pre></div>
<p>Leggermente più complessa (e inusuale) è l’aggiunta di righe ad un dataframe. Al contrario della matrice che di base non aveva nomi per le colonne e solo numeri o stringhe come tipologia di dato, per combinare per riga due dataframe dobbiamo avere:</p>
<ul>
<li>Lo stesso numero di colonne (come per le matrici)</li>
<li>Lo stesso nome delle colonne tra i due dataframe</li>
</ul>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="dataframe.html#cb125-1"></a>data_wide</span>
<span id="cb125-2"><a href="dataframe.html#cb125-2"></a><span class="co">##       Id age sex item_1 item_2 item_3 item_4</span></span>
<span id="cb125-3"><a href="dataframe.html#cb125-3"></a><span class="co">## 1 subj_1  21   F      2      0      2      3</span></span>
<span id="cb125-4"><a href="dataframe.html#cb125-4"></a><span class="co">## 2 subj_2  23   M      1      2      0      4</span></span>
<span id="cb125-5"><a href="dataframe.html#cb125-5"></a><span class="co">## 3 subj_3  19   F      1      1      1      7</span></span>
<span id="cb125-6"><a href="dataframe.html#cb125-6"></a></span>
<span id="cb125-7"><a href="dataframe.html#cb125-7"></a><span class="co"># Nuovo dataset con le stesse colonne ma chiamate in un modo diverso</span></span>
<span id="cb125-8"><a href="dataframe.html#cb125-8"></a></span>
<span id="cb125-9"><a href="dataframe.html#cb125-9"></a>new_row &lt;-<span class="st"> </span><span class="kw">data.frame</span>(</span>
<span id="cb125-10"><a href="dataframe.html#cb125-10"></a>  <span class="dt">Id =</span> <span class="st">&quot;subj_4&quot;</span>,</span>
<span id="cb125-11"><a href="dataframe.html#cb125-11"></a>  <span class="dt">gender =</span> <span class="st">&quot;M&quot;</span>, <span class="co"># gender invece che sex</span></span>
<span id="cb125-12"><a href="dataframe.html#cb125-12"></a>  <span class="dt">age =</span> <span class="dv">44</span>,</span>
<span id="cb125-13"><a href="dataframe.html#cb125-13"></a>  <span class="dt">item_1 =</span> <span class="dv">2</span>,</span>
<span id="cb125-14"><a href="dataframe.html#cb125-14"></a>  <span class="dt">item_2 =</span> <span class="dv">7</span>,</span>
<span id="cb125-15"><a href="dataframe.html#cb125-15"></a>  <span class="dt">item_3 =</span> <span class="dv">3</span>,</span>
<span id="cb125-16"><a href="dataframe.html#cb125-16"></a>  <span class="dt">item_4 =</span> <span class="dv">1</span></span>
<span id="cb125-17"><a href="dataframe.html#cb125-17"></a>)</span>
<span id="cb125-18"><a href="dataframe.html#cb125-18"></a></span>
<span id="cb125-19"><a href="dataframe.html#cb125-19"></a>new_row</span>
<span id="cb125-20"><a href="dataframe.html#cb125-20"></a><span class="co">##       Id gender age item_1 item_2 item_3 item_4</span></span>
<span id="cb125-21"><a href="dataframe.html#cb125-21"></a><span class="co">## 1 subj_4      M  44      2      7      3      1</span></span>
<span id="cb125-22"><a href="dataframe.html#cb125-22"></a></span>
<span id="cb125-23"><a href="dataframe.html#cb125-23"></a><span class="kw">rbind</span>(data_wide, new_row) <span class="co"># Errore</span></span>
<span id="cb125-24"><a href="dataframe.html#cb125-24"></a><span class="co">## Error in match.names(clabs, names(xi)): names do not match previous names</span></span>
<span id="cb125-25"><a href="dataframe.html#cb125-25"></a></span>
<span id="cb125-26"><a href="dataframe.html#cb125-26"></a><span class="co"># Nuovo dataset con le stesse colonne con il nome corretto</span></span>
<span id="cb125-27"><a href="dataframe.html#cb125-27"></a></span>
<span id="cb125-28"><a href="dataframe.html#cb125-28"></a>new_row &lt;-<span class="st"> </span><span class="kw">data.frame</span>(</span>
<span id="cb125-29"><a href="dataframe.html#cb125-29"></a>  <span class="dt">Id =</span> <span class="st">&quot;subj_4&quot;</span>,</span>
<span id="cb125-30"><a href="dataframe.html#cb125-30"></a>  <span class="dt">sex =</span> <span class="st">&quot;M&quot;</span>,</span>
<span id="cb125-31"><a href="dataframe.html#cb125-31"></a>  <span class="dt">age =</span> <span class="dv">44</span>,</span>
<span id="cb125-32"><a href="dataframe.html#cb125-32"></a>  <span class="dt">item_1 =</span> <span class="dv">2</span>,</span>
<span id="cb125-33"><a href="dataframe.html#cb125-33"></a>  <span class="dt">item_2 =</span> <span class="dv">7</span>,</span>
<span id="cb125-34"><a href="dataframe.html#cb125-34"></a>  <span class="dt">item_3 =</span> <span class="dv">3</span>,</span>
<span id="cb125-35"><a href="dataframe.html#cb125-35"></a>  <span class="dt">item_4 =</span> <span class="dv">1</span></span>
<span id="cb125-36"><a href="dataframe.html#cb125-36"></a>)</span>
<span id="cb125-37"><a href="dataframe.html#cb125-37"></a></span>
<span id="cb125-38"><a href="dataframe.html#cb125-38"></a>new_row</span>
<span id="cb125-39"><a href="dataframe.html#cb125-39"></a><span class="co">##       Id sex age item_1 item_2 item_3 item_4</span></span>
<span id="cb125-40"><a href="dataframe.html#cb125-40"></a><span class="co">## 1 subj_4   M  44      2      7      3      1</span></span>
<span id="cb125-41"><a href="dataframe.html#cb125-41"></a></span>
<span id="cb125-42"><a href="dataframe.html#cb125-42"></a><span class="kw">rbind</span>(data_wide, new_row) <span class="co"># Corretto</span></span>
<span id="cb125-43"><a href="dataframe.html#cb125-43"></a><span class="co">##       Id age sex item_1 item_2 item_3 item_4</span></span>
<span id="cb125-44"><a href="dataframe.html#cb125-44"></a><span class="co">## 1 subj_1  21   F      2      0      2      3</span></span>
<span id="cb125-45"><a href="dataframe.html#cb125-45"></a><span class="co">## 2 subj_2  23   M      1      2      0      4</span></span>
<span id="cb125-46"><a href="dataframe.html#cb125-46"></a><span class="co">## 3 subj_3  19   F      1      1      1      7</span></span>
<span id="cb125-47"><a href="dataframe.html#cb125-47"></a><span class="co">## 4 subj_4  44   M      2      7      3      1</span></span></code></pre></div>
</div>
<div id="indicizzazione-avanzata-1" class="section level2">
<h2><span class="header-section-number">10.4</span> Indicizzazione avanzata</h2>
<p>Quello che avevamo accennato per le matrici rispetto all’indicizzazione avanzata per <em>nome</em> e per <em>operazioni logiche</em> qui è invece molto utile e rilevante. Quando trattiamo dati che non sono solo numerici e sopratutto hanno delle proprietà come “soggetti”, “età”, “genere”, è intuitivo pensare un modo altrettanto logico e intuitivo di lavorare con queste strutture di dati. Per rendere il tutto più intuitivo facciamo un esempio con un dataset fittizio dove sono inseriti i nostri amici su Facebook ed alcune caratteristiche su di loro in particolare:</p>
<ul>
<li>Nome</li>
<li>Età (<code>age</code>)</li>
<li>Genere (<code>sex</code>)</li>
<li>Data iscrizione a Facebook (<code>facebook</code>)</li>
<li>Numero di fratelli/sorelle (<code>nsiblings</code>)</li>
<li>Numero di foto assieme a noi (<code>foto</code>)</li>
</ul>
<p>Vediamo il dataset in R:</p>
<pre><code>##         nome age sex facebook nsiblings foto
## 1    Filippo  17   M       17         0   13
## 2    Claudio  51   M       51         4   14
## 3   Giovanni  55   M       55         2   11
## 4  Francesco  23   M       23         3   18
## 5      Luigi  18   M       18         5   17
## 6    Giacomo  34   M       34         1    2
## 7  Gianmarco  49   M       49         4   20
## 8      Bruna  47   F       47         3   12
## 9     Franco  44   M       44         3    7
## 10   Elettra  56   F       56         5    0
## 11     Livia  32   F       32         2    2
## 12      Anna  56   F       56         3    2
## 13      Luca  25   M       25         5    2
## 14    Giulia  52   F       52         4   18
## 15     Alice  42   F       42         4   15</code></pre>
<p>Ora se volessimo usare l’indicizzazione standard possiamo semplicemente usare la sintassi solita <code>dataframe[riga/e, colonna/e]</code>. Tuttavia se volessimo trovare tutte le informazioni associate alla nostra amica <strong>Elettra</strong>, usare gli indici di riga/colonna diventa scomodo. Quello che è stato introdotto nei capitolo iniziali rispetto agli operatori logici qui diventa molto rilevante. Possiamo infatti “interrogare” il nostro dataframe dicendo di farci vedere tutte le informazioni che rispettano una specifica richiesta.</p>
<p>La sintassi “Tutte le informazioni riguardo Elettra” diventa <strong>tutte le colonne (informazioni) solo per la riga dove il nome è Elettra</strong>. In R questo può essere controllato in questo modo:</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="dataframe.html#cb127-1"></a><span class="co"># nomi sono nella colonna &quot;nome&quot;</span></span>
<span id="cb127-2"><a href="dataframe.html#cb127-2"></a>dat<span class="op">$</span>nome</span>
<span id="cb127-3"><a href="dataframe.html#cb127-3"></a><span class="co">##  [1] &quot;Filippo&quot;   &quot;Claudio&quot;   &quot;Giovanni&quot;  &quot;Francesco&quot; &quot;Luigi&quot;     &quot;Giacomo&quot;  </span></span>
<span id="cb127-4"><a href="dataframe.html#cb127-4"></a><span class="co">##  [7] &quot;Gianmarco&quot; &quot;Bruna&quot;     &quot;Franco&quot;    &quot;Elettra&quot;   &quot;Livia&quot;     &quot;Anna&quot;     </span></span>
<span id="cb127-5"><a href="dataframe.html#cb127-5"></a><span class="co">## [13] &quot;Luca&quot;      &quot;Giulia&quot;    &quot;Alice&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="dataframe.html#cb128-1"></a><span class="co"># Per sapere quale riga corrisponde ad elettra</span></span>
<span id="cb128-2"><a href="dataframe.html#cb128-2"></a>dat<span class="op">$</span>nome <span class="op">==</span><span class="st"> &quot;Elettra&quot;</span></span>
<span id="cb128-3"><a href="dataframe.html#cb128-3"></a><span class="co">##  [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE</span></span>
<span id="cb128-4"><a href="dataframe.html#cb128-4"></a><span class="co">## [13] FALSE FALSE FALSE</span></span>
<span id="cb128-5"><a href="dataframe.html#cb128-5"></a></span>
<span id="cb128-6"><a href="dataframe.html#cb128-6"></a><span class="kw">which</span>(dat<span class="op">$</span>nome <span class="op">==</span><span class="st"> &quot;Elettra&quot;</span>) <span class="co"># Elettra è la riga 10</span></span>
<span id="cb128-7"><a href="dataframe.html#cb128-7"></a><span class="co">## [1] 10</span></span></code></pre></div>
<p>Praticamente con <code>dat$nome == "Elettra"</code> otteniamo una serie di <code>TRUE</code> e <code>FALSE</code> in base a se il nome è “Elettra” oppure no. Combinando questo con l’indicizzazione classica <code>dataframe[riga/e, colonna/e]</code> possiamo usare gli operatori logici per interrogare il dataset.</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="dataframe.html#cb129-1"></a>dat[dat<span class="op">$</span>nome <span class="op">==</span><span class="st"> &quot;Elettra&quot;</span>, ]</span>
<span id="cb129-2"><a href="dataframe.html#cb129-2"></a><span class="co">##       nome age sex facebook nsiblings foto</span></span>
<span id="cb129-3"><a href="dataframe.html#cb129-3"></a><span class="co">## 10 Elettra  56   F       56         5    0</span></span></code></pre></div>
<p>Ora la sintassi <code>dataframe[riga/e, colonna/e]</code> assume un significato molto diverso ovvero:</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="dataframe.html#cb130-1"></a>dataframe[operazioni_logiche_righe, operazioni_logiche_colonne]</span></code></pre></div>
<p>Utilizzando gli operatori booleani <strong>AND</strong>(<code>$</code>) <strong>OR</strong>(<code>|</code>) e <strong>NOT</strong>(<code>!</code>) possiamo inoltre combinare più operazioni logiche insieme per ottenere indicizzazioni più complesse, ma sempre intuitive dal punto di vista della scrittura. Ad esempio: “Gli amici con età maggiore di 20 anni e con più di 5 foto assieme a noi”. In questo caso un amico per ottenere un valore <code>TRUE</code> ed essere così inserito nei risultati deve rispettare due condizioni:</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="dataframe.html#cb131-1"></a>dat[dat<span class="op">$</span>age <span class="op">&gt;</span><span class="st"> </span><span class="dv">20</span> <span class="op">&amp;</span><span class="st"> </span>dat<span class="op">$</span>foto <span class="op">&gt;</span><span class="st"> </span><span class="dv">5</span>, ]</span>
<span id="cb131-2"><a href="dataframe.html#cb131-2"></a><span class="co">##         nome age sex facebook nsiblings foto</span></span>
<span id="cb131-3"><a href="dataframe.html#cb131-3"></a><span class="co">## 2    Claudio  51   M       51         4   14</span></span>
<span id="cb131-4"><a href="dataframe.html#cb131-4"></a><span class="co">## 3   Giovanni  55   M       55         2   11</span></span>
<span id="cb131-5"><a href="dataframe.html#cb131-5"></a><span class="co">## 4  Francesco  23   M       23         3   18</span></span>
<span id="cb131-6"><a href="dataframe.html#cb131-6"></a><span class="co">## 7  Gianmarco  49   M       49         4   20</span></span>
<span id="cb131-7"><a href="dataframe.html#cb131-7"></a><span class="co">## 8      Bruna  47   F       47         3   12</span></span>
<span id="cb131-8"><a href="dataframe.html#cb131-8"></a><span class="co">## 9     Franco  44   M       44         3    7</span></span>
<span id="cb131-9"><a href="dataframe.html#cb131-9"></a><span class="co">## 14    Giulia  52   F       52         4   18</span></span>
<span id="cb131-10"><a href="dataframe.html#cb131-10"></a><span class="co">## 15     Alice  42   F       42         4   15</span></span></code></pre></div>
<p>Possiamo chiaramente eseguire selezioni sulle colonne, per esempio sapere solo il numero di fratelli/sorelle degli amici che rispettano la condizione precedente:</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="dataframe.html#cb132-1"></a>dat[dat<span class="op">$</span>age <span class="op">&gt;</span><span class="st"> </span><span class="dv">20</span> <span class="op">&amp;</span><span class="st"> </span>dat<span class="op">$</span>foto <span class="op">&gt;</span><span class="st"> </span><span class="dv">5</span>, <span class="st">&quot;nsiblings&quot;</span>]</span>
<span id="cb132-2"><a href="dataframe.html#cb132-2"></a><span class="co">## [1] 4 2 3 4 3 3 4 4</span></span></code></pre></div>
<p>Un ultimo aspetto da notare riguarda il tipo di output che otteniamo. Se la nostra selezione comprende più di 1 riga/colonna otteniamo un <code>dataframe</code> che è considerato un subset di quello iniziale. Se come nell’ultimo esempio otteniamo una singola colonna (o variabile) allora il risultato è un semplice vettore.</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="dataframe.html#cb133-1"></a>res1 &lt;-<span class="st"> </span>dat[dat<span class="op">$</span>age <span class="op">&gt;</span><span class="st"> </span><span class="dv">20</span> <span class="op">&amp;</span><span class="st"> </span>dat<span class="op">$</span>foto <span class="op">&gt;</span><span class="st"> </span><span class="dv">5</span>, ]</span>
<span id="cb133-2"><a href="dataframe.html#cb133-2"></a>res2 &lt;-<span class="st"> </span>dat[dat<span class="op">$</span>age <span class="op">&gt;</span><span class="st"> </span><span class="dv">20</span> <span class="op">&amp;</span><span class="st"> </span>dat<span class="op">$</span>foto <span class="op">&gt;</span><span class="st"> </span><span class="dv">5</span>, <span class="st">&quot;nsiblings&quot;</span>]</span>
<span id="cb133-3"><a href="dataframe.html#cb133-3"></a></span>
<span id="cb133-4"><a href="dataframe.html#cb133-4"></a><span class="kw">str</span>(res1) <span class="co"># è un dataframe</span></span>
<span id="cb133-5"><a href="dataframe.html#cb133-5"></a><span class="co">## &#39;data.frame&#39;:    8 obs. of  6 variables:</span></span>
<span id="cb133-6"><a href="dataframe.html#cb133-6"></a><span class="co">##  $ nome     : chr  &quot;Claudio&quot; &quot;Giovanni&quot; &quot;Francesco&quot; &quot;Gianmarco&quot; ...</span></span>
<span id="cb133-7"><a href="dataframe.html#cb133-7"></a><span class="co">##  $ age      : int  51 55 23 49 47 44 52 42</span></span>
<span id="cb133-8"><a href="dataframe.html#cb133-8"></a><span class="co">##  $ sex      : chr  &quot;M&quot; &quot;M&quot; &quot;M&quot; &quot;M&quot; ...</span></span>
<span id="cb133-9"><a href="dataframe.html#cb133-9"></a><span class="co">##  $ facebook : int  51 55 23 49 47 44 52 42</span></span>
<span id="cb133-10"><a href="dataframe.html#cb133-10"></a><span class="co">##  $ nsiblings: int  4 2 3 4 3 3 4 4</span></span>
<span id="cb133-11"><a href="dataframe.html#cb133-11"></a><span class="co">##  $ foto     : int  14 11 18 20 12 7 18 15</span></span>
<span id="cb133-12"><a href="dataframe.html#cb133-12"></a><span class="kw">str</span>(res2) <span class="co"># è un vettore</span></span>
<span id="cb133-13"><a href="dataframe.html#cb133-13"></a><span class="co">##  int [1:8] 4 2 3 4 3 3 4 4</span></span></code></pre></div>
<p>Allo stesso modo di selezionare una specifica colonna o riga possiamo eliminare una osservazione. Il concetto di eliminazione o sovrascrittura in R è diverso da quello di un normale file perchè tutte le operazioni che facciamo solitamente portano a tre strade:</p>
<ol style="list-style-type: decimal">
<li>Eseguiamo le operazioni in modalità “volatile” senza assegnare il risultato</li>
<li>Creiamo un nuovo oggetto <code>B</code> che deriva da applicare ad <code>A</code> una certa operazione <code>B &lt;- funzione(A)</code></li>
<li>Assegnamo ad <code>A</code> una serie di operazioni su se stesso, di fatto sovrascrivendo l’oggetto <code>A &lt;- funzione(A)</code></li>
</ol>
<p>Nel caso dei dataframe possiamo usare l’operatore <code>-</code> (meno) per escludere una certa selezione:</p>
<pre><code>##       Id age sex item_1 item_2 item_3 item_4
## 2 subj_2  23   M      1      2      0      4
## 3 subj_3  19   F      1      1      1      7
##       Id age item_1 item_2 item_3 item_4
## 1 subj_1  21      2      0      2      3
## 2 subj_2  23      1      2      0      4
## 3 subj_3  19      1      1      1      7
##       Id sex item_1 item_2 item_3 item_4
## 2 subj_2   M      1      2      0      4</code></pre>
<p>E’ possibile anche escludere (ed eliminare in un certo senso) delle informazioni usando gli operatori logici in gli operatori <strong>NOT</strong>(<code>!</code>) e diverso da (<code>!=</code>):</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="dataframe.html#cb135-1"></a></span>
<span id="cb135-2"><a href="dataframe.html#cb135-2"></a><span class="co"># Seleziono tutto tranne il soggetto 2</span></span>
<span id="cb135-3"><a href="dataframe.html#cb135-3"></a></span>
<span id="cb135-4"><a href="dataframe.html#cb135-4"></a>data_wide[<span class="op">!</span>data_wide<span class="op">$</span>Id <span class="op">==</span><span class="st"> &quot;subj_2&quot;</span>, ] <span class="co"># modo 1</span></span>
<span id="cb135-5"><a href="dataframe.html#cb135-5"></a><span class="co">##       Id age sex item_1 item_2 item_3 item_4</span></span>
<span id="cb135-6"><a href="dataframe.html#cb135-6"></a><span class="co">## 1 subj_1  21   F      2      0      2      3</span></span>
<span id="cb135-7"><a href="dataframe.html#cb135-7"></a><span class="co">## 3 subj_3  19   F      1      1      1      7</span></span>
<span id="cb135-8"><a href="dataframe.html#cb135-8"></a></span>
<span id="cb135-9"><a href="dataframe.html#cb135-9"></a>data_wide[data_wide<span class="op">$</span>Id <span class="op">!=</span><span class="st"> &quot;subj_2&quot;</span>, ] <span class="co"># modo 2</span></span>
<span id="cb135-10"><a href="dataframe.html#cb135-10"></a><span class="co">##       Id age sex item_1 item_2 item_3 item_4</span></span>
<span id="cb135-11"><a href="dataframe.html#cb135-11"></a><span class="co">## 1 subj_1  21   F      2      0      2      3</span></span>
<span id="cb135-12"><a href="dataframe.html#cb135-12"></a><span class="co">## 3 subj_3  19   F      1      1      1      7</span></span></code></pre></div>
<div class="warning" title="Attenzione ad eliminare">
<p>L’utilizzo dell’operatore <code>-</code> è sempre in qualche modo pericoloso, sopratutto se l’oggetto che viene creato (o sovrascritto) viene poi utilizzato in altre operazioni. Eliminare delle informazioni, tranne quando è veramente necessario, non è mai una buona cosa. Se dovete selezionare una parte dei dati è sempre meglio creare un nuovo dataframe (o un nuovo oggetto in generale) e mantendere una versione di quello originale sempre disponibile.</p>
</div>
<p>Nella tabella <a href="dataframe.html#tab:frame-tab">10.2</a> è contenuto un riassunto delle principali operazioni che si possono eseguire con i dataframe:</p>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:frame-tab">Table 10.2: </span>Operazioni con dataframe
</caption>
<thead>
<tr>
<th style="text-align:left;">
Operazione
</th>
<th style="text-align:left;">
Nome
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
nome_DataFrame &lt;- cbind(nome_DataFrame, nuova_variabile) <br> nome_DataFrame$nome_variabile &lt;- dati
</td>
<td style="text-align:left;">
Per aggiungere una nuova variabile al DataFrame (deve avere lo stesso numero di righe)
</td>
</tr>
<tr>
<td style="text-align:left;">
nome_DataFrame &lt;- rbind(nome_DataFrame, nuova_variabile)
</td>
<td style="text-align:left;">
Per aggiungere delle osservazioni (i nuovi dati devono essere coerenti con la struttura del DataFrame)
</td>
</tr>
<tr>
<td style="text-align:left;">
nrow(nome_DataFrame)
</td>
<td style="text-align:left;">
Per valutare il numero di osservazioni del DataFrame
</td>
</tr>
<tr>
<td style="text-align:left;">
ncol(nome_DataFrame)
</td>
<td style="text-align:left;">
Per valutare il numero di variabili del DataFrame
</td>
</tr>
<tr>
<td style="text-align:left;">
holder(nome_DataFrame)
</td>
<td style="text-align:left;">
Nomi delle colonne del DataFrame
</td>
</tr>
<tr>
<td style="text-align:left;">
rownames(nome_DataFrame)
</td>
<td style="text-align:left;">
Nomi delle righe del DataFrame
</td>
</tr>
</tbody>
</table>
<div id="esercizi-9" class="section level3 unnumbered">
<h3>Esercizi</h3>
<p>Facendo riferimento ai dataframe <code>data_long</code> e <code>data_wide</code>:</p>
<ol style="list-style-type: decimal">
<li>Utilizzando gli <strong>indici numerici</strong> di riga e di colonna seleziona i dati del soggetto <code>subj_2</code> riguardanti le variabili <code>item</code> e <code>response</code> dal DataFrame <code>data_long</code>.</li>
<li>Compi la stessa selezione dell’esercizio precedente usando però questa volta una condizione logica per gli indici di riga e indicando direttamente il nome delle variabili per gli indici di colonna.</li>
<li>Considerando il DataFrame <code>data_wide</code> seleziona le variabili <code>Id</code> e <code>sex</code> dei soggetti che hanno risposto 1 alla variabile <code>item_1</code>.</li>
<li>Considerando il DataFrame <code>data_long</code> seleziona solamente i dati riguardanti le ragazze con etè superiore ai 20 anni.</li>
<li>Elimina dal DataFrame <code>data_long</code> le osservazioni riguardanti il soggetto <code>subj_2</code> e la variabile <code>"sex"</code>.</li>
<li>Aggiungi sia al DataFrame <code>data_wide</code> che <code>data_long</code> la variabile numerica <code>"memory_pre"</code>.</li>
</ol>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="dataframe.html#cb136-1"></a><span class="kw">data.frame</span>(<span class="dt">Id=</span><span class="kw">c</span>(<span class="st">&quot;subj_1&quot;</span>,<span class="st">&quot;subj_2&quot;</span>,<span class="st">&quot;subj_3&quot;</span>),</span>
<span id="cb136-2"><a href="dataframe.html#cb136-2"></a>                      <span class="dt">memory_pre=</span><span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">1</span>))</span></code></pre></div>
<ol start="7" style="list-style-type: decimal">
<li>Aggiungi sia al DataFrame <code>data_wide</code> che <code>data_long</code> la variabile categoriale <code>"gruppo"</code>.</li>
</ol>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="dataframe.html#cb137-1"></a><span class="kw">data.frame</span>(<span class="dt">Id=</span><span class="kw">c</span>(<span class="st">&quot;subj_1&quot;</span>,<span class="st">&quot;subj_2&quot;</span>,<span class="st">&quot;subj_3&quot;</span>),</span>
<span id="cb137-2"><a href="dataframe.html#cb137-2"></a>                      <span class="dt">gruppo=</span><span class="kw">c</span>(<span class="st">&quot;trattamento&quot;</span>,<span class="st">&quot;trattemento&quot;</span>,<span class="st">&quot;controllo&quot;</span>))</span></code></pre></div>
<ol start="8" style="list-style-type: decimal">
<li>Aggiungi al DataFrame <code>data_wide</code> i dati del soggetto <code>subj_4</code> e <code>subj_5</code>.</li>
</ol>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="dataframe.html#cb138-1"></a><span class="kw">data.frame</span>(<span class="dt">Id=</span><span class="kw">c</span>(<span class="st">&quot;subj_4&quot;</span>,<span class="st">&quot;subj_5&quot;</span>),</span>
<span id="cb138-2"><a href="dataframe.html#cb138-2"></a>           <span class="dt">age=</span><span class="kw">c</span>(<span class="dv">25</span>,<span class="dv">22</span>),</span>
<span id="cb138-3"><a href="dataframe.html#cb138-3"></a>           <span class="dt">sex=</span><span class="kw">c</span>(<span class="st">&quot;F&quot;</span>,<span class="st">&quot;M&quot;</span>),</span>
<span id="cb138-4"><a href="dataframe.html#cb138-4"></a>           <span class="dt">item_1=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>),</span>
<span id="cb138-5"><a href="dataframe.html#cb138-5"></a>           <span class="dt">item_2=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">1</span>),</span>
<span id="cb138-6"><a href="dataframe.html#cb138-6"></a>           <span class="dt">item_3=</span><span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">0</span>),</span>
<span id="cb138-7"><a href="dataframe.html#cb138-7"></a>           <span class="dt">memory_pre=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">3</span>),</span>
<span id="cb138-8"><a href="dataframe.html#cb138-8"></a>           <span class="dt">gruppo=</span><span class="kw">c</span>(<span class="st">&quot;trattemento&quot;</span>,<span class="st">&quot;controllo&quot;</span>))</span></code></pre></div>
<ol start="9" style="list-style-type: decimal">
<li>Considerando il DataFrame <code>datawide</code> calcola la variabile <code>"memory_post"</code> data dalla somma degli item.</li>
<li>Considerando il DataFrame <code>data_wide</code> cambia i nomi delle variabili <code>item_1</code>, <code>item_2</code> e <code>item_3</code> rispettivamente in <code>problem_1</code>, <code>problem_2</code> e <code>problem_3</code>.</li>
</ol>
<!--
## Funzioni con DataFrames

<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>(\#tab:unnamed-chunk-21)Operazioni con matrici</caption>
 <thead>
  <tr>
   <th style="text-align:left;"> Operazione </th>
   <th style="text-align:left;"> Nome </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> nome_DataFrame &lt;- cbind(nome_DataFrame, nuova_variabile) <br> nome_DataFrame$nome_variabile &lt;- dati </td>
   <td style="text-align:left;"> Per aggiungere una nuova variabile al DataFrame (deve avere lo stesso numero di righe) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> nome_DataFrame &lt;- rbind(nome_DataFrame, nuova_variabile) </td>
   <td style="text-align:left;"> Per sggiungere delle osservazioni (i nuovi dati devono essere coerenti con la struttura del DataFrame) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> nrow(nome_DataFrame) </td>
   <td style="text-align:left;"> Per valutare il numero di osservazioni del DataFrame </td>
  </tr>
  <tr>
   <td style="text-align:left;"> ncol(nome_DataFrame) </td>
   <td style="text-align:left;"> Per valutare il numero di variabili del DataFrame </td>
  </tr>
  <tr>
   <td style="text-align:left;"> holder(nome_DataFrame) </td>
   <td style="text-align:left;"> Nomi delle colonne del DataFrame </td>
  </tr>
  <tr>
   <td style="text-align:left;"> rownames(nome_DataFrame) </td>
   <td style="text-align:left;"> Nomi delle righe del DataFrame </td>
  </tr>
</tbody>
</table>

### Esercizi {-}

1. Aggiungi sia al DataFrame `data_wide` che `data_long` la variabile numerica `"memory_pre"`.

```r
data.frame(Id=c("subj_1","subj_2","subj_3"),
                      memory_pre=c(3,2,1))
```

2. Aggiungi sia al DataFrame `data_wide` che `data_long` la variabile categoriale `"gruppo"`.

```r
data.frame(Id=c("subj_1","subj_2","subj_3"),
                      gruppo=c("trattamento","trattemento","controllo"))
```
3. Aggiungi al DataFrame `data_wide` i dati del soggetto `subj_4` e `subj_5`.

```r
data.frame(Id=c("subj_4","subj_5"),
           age=c(25,22),
           sex=c("F","M"),
           item_1=c(1,1),
           item_2=c(0,1),
           item_3=c(2,0),
           memory_pre=c(1,3),
           gruppo=c("trattemento","controllo"))
```
4. Considerando il DataFrame `datawide` calcola la variabile `"memory_post"` data dalla somma degli item.
5. Considerando il DataFrame `data_wide` cambia i nomi delle variabili `item_1`, `item_2` e `item_3` rispettivamente in `problem_1`, `problem_2` e `problem_3`.
-->

</div>
</div>
</div>
<hr>
<center>
  <div class="footer">
    Questo libro è rilasciato in accordo con <a href= "https://creativecommons.org/licenses/by-sa/4.0/legalcode">CC BY-SA</a>.
    <br>
    Le illustrazioni utilizzate appartengono a <a href= "https://rstudio4edu.github.io/rstudio4edu-book/">rstudio4edu-book</a> in accordo con <a href= "https://creativecommons.org/licenses/by-nc/2.0/">CC BY-NC</a>.
    <br>
    Per conoscere di più riguardo <span style="color: #8C3031; font-weight:bold"> Psicostat</span> e le nostre attività, visita <a href= "https://psicostat.dpss.psy.unipd.it/">https://psicostat.dpss.psy.unipd.it/</a>.
  </div>
</center>
            </section>

          </div>
        </div>
      </div>
<a href="matrix.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="list.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": true
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/psicostat/Introduction2R/edit/master/12-dataframe.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Introduction2R.pdf", "Introduction2R.epub"],
"toc": {
"collapse": "section",
"scroll_highlight": true,
"toc_float": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
