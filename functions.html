<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Capitolo 12 Definizione di Funzioni | Introduction to R</title>
  <meta name="description" content="Questo è un libro intorduttivo ad R prodotto da Psicostat, gruppo di ricerca interdisciplinare che unisce la passione per la statistica e la psicologia." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Capitolo 12 Definizione di Funzioni | Introduction to R" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://psicostat.github.io/Introduction2R/" />
  <meta property="og:image" content="https://psicostat.github.io/Introduction2R/images/logo_psicostat.png" />
  <meta property="og:description" content="Questo è un libro intorduttivo ad R prodotto da Psicostat, gruppo di ricerca interdisciplinare che unisce la passione per la statistica e la psicologia." />
  <meta name="github-repo" content="psicostat/Introduction2R" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Capitolo 12 Definizione di Funzioni | Introduction to R" />
  
  <meta name="twitter:description" content="Questo è un libro intorduttivo ad R prodotto da Psicostat, gruppo di ricerca interdisciplinare che unisce la passione per la statistica e la psicologia." />
  <meta name="twitter:image" content="https://psicostat.github.io/Introduction2R/images/logo_psicostat.png" />

<meta name="author" content="Claudio Zandonella Callegher and Filippo Gambarota members of Psicostat" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="third-section.html"/>
<link rel="next" href="conditionals.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-RM7HE6D2VW"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-RM7HE6D2VW');
</script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="assets/style.css" type="text/css" />
<link rel="stylesheet" href="assets/toc.css" type="text/css" />
<link rel="stylesheet" href="assets/custom.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="toc-logo"><a href="./"><img src="images/hex_psicostat.png"></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Presentazione</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#perchè-r"><i class="fa fa-check"></i>Perchè R</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#struttura-del-libro"><i class="fa fa-check"></i>Struttura del libro</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#risorse-utili"><i class="fa fa-check"></i>Risorse Utili</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#psicostat"><i class="fa fa-check"></i>Psicostat</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#collaborazione"><i class="fa fa-check"></i>Collaborazione</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#riconoscimenti"><i class="fa fa-check"></i>Riconoscimenti</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#licenza"><i class="fa fa-check"></i>Licenza</a></li>
</ul></li>
<li class="part"><span><b>Get Started</b></span></li>
<li class="chapter" data-level="" data-path="introduzione.html"><a href="introduzione.html"><i class="fa fa-check"></i>Introduzione</a></li>
<li class="chapter" data-level="1" data-path="install.html"><a href="install.html"><i class="fa fa-check"></i><b>1</b> Installare R e RStudio</a><ul>
<li class="chapter" data-level="1.1" data-path="install.html"><a href="install.html#install-r"><i class="fa fa-check"></i><b>1.1</b> Installare R</a><ul>
<li class="chapter" data-level="1.1.1" data-path="install.html"><a href="install.html#r-windows"><i class="fa fa-check"></i><b>1.1.1</b> R Windows</a></li>
<li class="chapter" data-level="1.1.2" data-path="install.html"><a href="install.html#r-macos"><i class="fa fa-check"></i><b>1.1.2</b> R MacOS</a></li>
<li class="chapter" data-level="1.1.3" data-path="install.html"><a href="install.html#r-linux"><i class="fa fa-check"></i><b>1.1.3</b> R Linux</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="install.html"><a href="install.html#installare-r-studio"><i class="fa fa-check"></i><b>1.2</b> Installare R Studio</a><ul>
<li class="chapter" data-level="1.2.1" data-path="install.html"><a href="install.html#r-studio-in-linux"><i class="fa fa-check"></i><b>1.2.1</b> R Studio in Linux</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="rstudio-gui.html"><a href="rstudio-gui.html"><i class="fa fa-check"></i><b>2</b> Interfaccia RStudio</a></li>
<li class="chapter" data-level="3" data-path="first-comands.html"><a href="first-comands.html"><i class="fa fa-check"></i><b>3</b> Primi Passi in R</a><ul>
<li class="chapter" data-level="3.1" data-path="first-comands.html"><a href="first-comands.html#math-operators"><i class="fa fa-check"></i><b>3.1</b> Operatori Matematici</a><ul>
<li class="chapter" data-level="3.1.1" data-path="first-comands.html"><a href="first-comands.html#ordine-operazioni"><i class="fa fa-check"></i><b>3.1.1</b> Ordine Operazioni</a></li>
<li class="chapter" data-level="" data-path="first-comands.html"><a href="first-comands.html#esercizi"><i class="fa fa-check"></i>Esercizi</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="first-comands.html"><a href="first-comands.html#operators-rel-log"><i class="fa fa-check"></i><b>3.2</b> Operatori Relazionali e Logici</a><ul>
<li class="chapter" data-level="3.2.1" data-path="first-comands.html"><a href="first-comands.html#operatori-relazionali"><i class="fa fa-check"></i><b>3.2.1</b> Operatori Relazionali</a></li>
<li class="chapter" data-level="3.2.2" data-path="first-comands.html"><a href="first-comands.html#operatori-logici"><i class="fa fa-check"></i><b>3.2.2</b> Operatori Logici</a></li>
<li class="chapter" data-level="3.2.3" data-path="first-comands.html"><a href="first-comands.html#ordine-valutazione-relazioni"><i class="fa fa-check"></i><b>3.2.3</b> Ordine valutazione relazioni</a></li>
<li class="chapter" data-level="" data-path="first-comands.html"><a href="first-comands.html#esercizi-1"><i class="fa fa-check"></i>Esercizi</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="objects-functions.html"><a href="objects-functions.html"><i class="fa fa-check"></i><b>4</b> Due Compagni Inseparabili</a><ul>
<li class="chapter" data-level="4.1" data-path="objects-functions.html"><a href="objects-functions.html#objects-section"><i class="fa fa-check"></i><b>4.1</b> Oggetti</a><ul>
<li class="chapter" data-level="4.1.1" data-path="objects-functions.html"><a href="objects-functions.html#assign"><i class="fa fa-check"></i><b>4.1.1</b> Assegnare e Richiamare un oggetto</a></li>
<li class="chapter" data-level="4.1.2" data-path="objects-functions.html"><a href="objects-functions.html#objects-names"><i class="fa fa-check"></i><b>4.1.2</b> Nomi degli oggetti</a></li>
<li class="chapter" data-level="4.1.3" data-path="objects-functions.html"><a href="objects-functions.html#tipologie-dati-e-strutture-dati"><i class="fa fa-check"></i><b>4.1.3</b> Tipologie Dati e Strutture Dati</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="objects-functions.html"><a href="objects-functions.html#functions-def"><i class="fa fa-check"></i><b>4.2</b> Funzioni</a><ul>
<li class="chapter" data-level="4.2.1" data-path="objects-functions.html"><a href="objects-functions.html#function-arguments"><i class="fa fa-check"></i><b>4.2.1</b> Argomenti di una Funzione</a></li>
<li class="chapter" data-level="4.2.2" data-path="objects-functions.html"><a href="objects-functions.html#help"><i class="fa fa-check"></i><b>4.2.2</b> Help! I need Somebody…Help!</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="working-environment.html"><a href="working-environment.html"><i class="fa fa-check"></i><b>5</b> Ambiente di Lavoro</a><ul>
<li class="chapter" data-level="5.1" data-path="working-environment.html"><a href="working-environment.html#environment"><i class="fa fa-check"></i><b>5.1</b> Environment</a><ul>
<li class="chapter" data-level="5.1.1" data-path="working-environment.html"><a href="working-environment.html#aggiungere-oggetti-allenvironment"><i class="fa fa-check"></i><b>5.1.1</b> Aggiungere Oggetti all’Environment</a></li>
<li class="chapter" data-level="5.1.2" data-path="working-environment.html"><a href="working-environment.html#rimuovere-oggetti-dallenvironment"><i class="fa fa-check"></i><b>5.1.2</b> Rimuovere Oggetti dall’Environment</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="working-environment.html"><a href="working-environment.html#working-directory"><i class="fa fa-check"></i><b>5.2</b> Working Directory</a><ul>
<li class="chapter" data-level="5.2.1" data-path="working-environment.html"><a href="working-environment.html#organizzazione-computer"><i class="fa fa-check"></i><b>5.2.1</b> Organizzazione Computer</a></li>
<li class="chapter" data-level="5.2.2" data-path="working-environment.html"><a href="working-environment.html#absolute-path-e-relative-path"><i class="fa fa-check"></i><b>5.2.2</b> Absolute Path e Relative Path</a></li>
<li class="chapter" data-level="5.2.3" data-path="working-environment.html"><a href="working-environment.html#working-directory-in-r"><i class="fa fa-check"></i><b>5.2.3</b> Working Directory in R</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="working-environment.html"><a href="working-environment.html#packages"><i class="fa fa-check"></i><b>5.3</b> R-packages</a><ul>
<li class="chapter" data-level="5.3.1" data-path="working-environment.html"><a href="working-environment.html#install.packages"><i class="fa fa-check"></i><b>5.3.1</b> install.packages()</a></li>
<li class="chapter" data-level="5.3.2" data-path="working-environment.html"><a href="working-environment.html#library"><i class="fa fa-check"></i><b>5.3.2</b> library()</a></li>
<li class="chapter" data-level="5.3.3" data-path="working-environment.html"><a href="working-environment.html#aggiornare-e-rimuovere-pacchetti"><i class="fa fa-check"></i><b>5.3.3</b> Aggiornare e Rimuovere Pacchetti</a></li>
<li class="chapter" data-level="5.3.4" data-path="working-environment.html"><a href="working-environment.html#documentazione-pacchetti"><i class="fa fa-check"></i><b>5.3.4</b> Documentazione Pacchetti</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="working-session.html"><a href="working-session.html"><i class="fa fa-check"></i><b>6</b> Sessione di Lavoro</a><ul>
<li class="chapter" data-level="6.1" data-path="working-session.html"><a href="working-session.html#organizzazione-script"><i class="fa fa-check"></i><b>6.1</b> Organizzazione Script</a><ul>
<li class="chapter" data-level="6.1.1" data-path="working-session.html"><a href="working-session.html#creare-delle-sezioni"><i class="fa fa-check"></i><b>6.1.1</b> Creare delle Sezioni</a></li>
<li class="chapter" data-level="6.1.2" data-path="working-session.html"><a href="working-session.html#sintax"><i class="fa fa-check"></i><b>6.1.2</b> Sintassi</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="working-session.html"><a href="working-session.html#organizzazione-progetti"><i class="fa fa-check"></i><b>6.2</b> Organizzazione Progetti</a><ul>
<li class="chapter" data-level="6.2.1" data-path="working-session.html"><a href="working-session.html#rstudio-projects"><i class="fa fa-check"></i><b>6.2.1</b> RStudio Projects</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="working-session.html"><a href="working-session.html#messages-warnings-e-errors"><i class="fa fa-check"></i><b>6.3</b> Messages, Warnings e Errors</a><ul>
<li class="chapter" data-level="6.3.1" data-path="working-session.html"><a href="working-session.html#risolvere-gli-errori"><i class="fa fa-check"></i><b>6.3.1</b> Risolvere gli Errori</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Struttura Dati</b></span></li>
<li class="chapter" data-level="" data-path="second-section.html"><a href="second-section.html"><i class="fa fa-check"></i>Introduzione</a></li>
<li class="chapter" data-level="7" data-path="vector.html"><a href="vector.html"><i class="fa fa-check"></i><b>7</b> Vettori</a><ul>
<li class="chapter" data-level="7.1" data-path="vector.html"><a href="vector.html#creazione"><i class="fa fa-check"></i><b>7.1</b> Creazione</a><ul>
<li class="chapter" data-level="" data-path="vector.html"><a href="vector.html#esercizi-2"><i class="fa fa-check"></i>Esercizi</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="vector.html"><a href="vector.html#vector-selection"><i class="fa fa-check"></i><b>7.2</b> Selezione Elementi</a><ul>
<li class="chapter" data-level="7.2.1" data-path="vector.html"><a href="vector.html#vector-selection-advanced"><i class="fa fa-check"></i><b>7.2.1</b> Utilizzi Avanzati Selezione</a></li>
<li class="chapter" data-level="" data-path="vector.html"><a href="vector.html#esercizi-3"><i class="fa fa-check"></i>Esercizi</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="vector.html"><a href="vector.html#vector-functions"><i class="fa fa-check"></i><b>7.3</b> Funzioni ed Operazioni</a><ul>
<li class="chapter" data-level="" data-path="vector.html"><a href="vector.html#esercizi-4"><i class="fa fa-check"></i>Esercizi</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="vector.html"><a href="vector.html#data-type"><i class="fa fa-check"></i><b>7.4</b> Data Type</a><ul>
<li class="chapter" data-level="7.4.1" data-path="vector.html"><a href="vector.html#character"><i class="fa fa-check"></i><b>7.4.1</b> Character</a></li>
<li class="chapter" data-level="7.4.2" data-path="vector.html"><a href="vector.html#numeric"><i class="fa fa-check"></i><b>7.4.2</b> Numeric</a></li>
<li class="chapter" data-level="7.4.3" data-path="vector.html"><a href="vector.html#integer"><i class="fa fa-check"></i><b>7.4.3</b> Integer</a></li>
<li class="chapter" data-level="7.4.4" data-path="vector.html"><a href="vector.html#logical-vector"><i class="fa fa-check"></i><b>7.4.4</b> Logical</a></li>
<li class="chapter" data-level="7.4.5" data-path="vector.html"><a href="vector.html#valori-speciali"><i class="fa fa-check"></i><b>7.4.5</b> Valori speciali</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="factor.html"><a href="factor.html"><i class="fa fa-check"></i><b>8</b> Fattori</a><ul>
<li class="chapter" data-level="8.1" data-path="factor.html"><a href="factor.html#attributes"><i class="fa fa-check"></i><b>8.1</b> Attributi di un Oggetto</a><ul>
<li class="chapter" data-level="8.1.1" data-path="factor.html"><a href="factor.html#attributi-di-un-vettore"><i class="fa fa-check"></i><b>8.1.1</b> Attributi di un Vettore</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="factor.html"><a href="factor.html#fattori"><i class="fa fa-check"></i><b>8.2</b> Fattori</a><ul>
<li class="chapter" data-level="8.2.1" data-path="factor.html"><a href="factor.html#funzionamento-fatori"><i class="fa fa-check"></i><b>8.2.1</b> Funzionamento Fatori</a></li>
<li class="chapter" data-level="8.2.2" data-path="factor.html"><a href="factor.html#operazioni-fattori"><i class="fa fa-check"></i><b>8.2.2</b> Operazioni Fattori</a></li>
<li class="chapter" data-level="8.2.3" data-path="factor.html"><a href="factor.html#fattori-ordinali"><i class="fa fa-check"></i><b>8.2.3</b> Fattori Ordinali</a></li>
<li class="chapter" data-level="" data-path="factor.html"><a href="factor.html#esercizi-5"><i class="fa fa-check"></i>Esercizi</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="matrix.html"><a href="matrix.html"><i class="fa fa-check"></i><b>9</b> Matrici</a><ul>
<li class="chapter" data-level="9.1" data-path="matrix.html"><a href="matrix.html#creazione-1"><i class="fa fa-check"></i><b>9.1</b> Creazione</a><ul>
<li class="chapter" data-level="9.1.1" data-path="matrix.html"><a href="matrix.html#matrix-types"><i class="fa fa-check"></i><b>9.1.1</b> Tipologie di Matrici</a></li>
<li class="chapter" data-level="" data-path="matrix.html"><a href="matrix.html#esercizi-6"><i class="fa fa-check"></i>Esercizi</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="matrix.html"><a href="matrix.html#sel-matrix"><i class="fa fa-check"></i><b>9.2</b> Selezione Elementi</a><ul>
<li class="chapter" data-level="9.2.1" data-path="matrix.html"><a href="matrix.html#matrix-selection-advanced"><i class="fa fa-check"></i><b>9.2.1</b> Utilizzi Avanzati Selezione</a></li>
<li class="chapter" data-level="" data-path="matrix.html"><a href="matrix.html#esercizi-7"><i class="fa fa-check"></i>Esercizi</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="matrix.html"><a href="matrix.html#funzioni-ed-operazioni"><i class="fa fa-check"></i><b>9.3</b> Funzioni ed Operazioni</a><ul>
<li class="chapter" data-level="9.3.1" data-path="matrix.html"><a href="matrix.html#mat-prop"><i class="fa fa-check"></i><b>9.3.1</b> Attributi di una Matrice</a></li>
<li class="chapter" data-level="9.3.2" data-path="matrix.html"><a href="matrix.html#matrix-bind"><i class="fa fa-check"></i><b>9.3.2</b> Unire Matrici</a></li>
<li class="chapter" data-level="9.3.3" data-path="matrix.html"><a href="matrix.html#operatori-matematici"><i class="fa fa-check"></i><b>9.3.3</b> Operatori Matematici</a></li>
<li class="chapter" data-level="" data-path="matrix.html"><a href="matrix.html#esercizi-8"><i class="fa fa-check"></i>Esercizi</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="matrix.html"><a href="matrix.html#array"><i class="fa fa-check"></i><b>9.4</b> Array</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="dataframe.html"><a href="dataframe.html"><i class="fa fa-check"></i><b>10</b> Dataframe</a><ul>
<li class="chapter" data-level="10.1" data-path="dataframe.html"><a href="dataframe.html#creazione-di-un-dataframe"><i class="fa fa-check"></i><b>10.1</b> Creazione di un dataframe</a><ul>
<li class="chapter" data-level="" data-path="dataframe.html"><a href="dataframe.html#esercizi-9"><i class="fa fa-check"></i>Esercizi</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="dataframe.html"><a href="dataframe.html#sel-df"><i class="fa fa-check"></i><b>10.2</b> Selezione Elementi</a><ul>
<li class="chapter" data-level="10.2.1" data-path="dataframe.html"><a href="dataframe.html#utilizzi-avanzati-selezione"><i class="fa fa-check"></i><b>10.2.1</b> Utilizzi Avanzati Selezione</a></li>
<li class="chapter" data-level="" data-path="dataframe.html"><a href="dataframe.html#esercizi-10"><i class="fa fa-check"></i>Esercizi</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="dataframe.html"><a href="dataframe.html#funzioni-ed-operazioni-1"><i class="fa fa-check"></i><b>10.3</b> Funzioni ed Operazioni</a><ul>
<li class="chapter" data-level="10.3.1" data-path="dataframe.html"><a href="dataframe.html#attributi-di-un-dataframe"><i class="fa fa-check"></i><b>10.3.1</b> Attributi di un Dataframe</a></li>
<li class="chapter" data-level="10.3.2" data-path="dataframe.html"><a href="dataframe.html#unire-dataframe"><i class="fa fa-check"></i><b>10.3.2</b> Unire Dataframe</a></li>
<li class="chapter" data-level="10.3.3" data-path="dataframe.html"><a href="dataframe.html#informazioni-dataframe"><i class="fa fa-check"></i><b>10.3.3</b> Informazioni Dataframe</a></li>
<li class="chapter" data-level="" data-path="dataframe.html"><a href="dataframe.html#esercizi-11"><i class="fa fa-check"></i>Esercizi</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="list.html"><a href="list.html"><i class="fa fa-check"></i><b>11</b> Liste</a><ul>
<li class="chapter" data-level="11.1" data-path="list.html"><a href="list.html#creazione-di-liste"><i class="fa fa-check"></i><b>11.1</b> Creazione di Liste</a><ul>
<li class="chapter" data-level="" data-path="list.html"><a href="list.html#esercizi-12"><i class="fa fa-check"></i>Esercizi</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="list.html"><a href="list.html#selezione-elementi"><i class="fa fa-check"></i><b>11.2</b> Selezione Elementi</a><ul>
<li class="chapter" data-level="11.2.1" data-path="list.html"><a href="list.html#utilizzi-avanzati-selezione-1"><i class="fa fa-check"></i><b>11.2.1</b> Utilizzi Avanzati Selezione</a></li>
<li class="chapter" data-level="" data-path="list.html"><a href="list.html#esercizi-13"><i class="fa fa-check"></i>Esercizi</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="list.html"><a href="list.html#funzioni-ed-operazioni-2"><i class="fa fa-check"></i><b>11.3</b> Funzioni ed Operazioni</a><ul>
<li class="chapter" data-level="11.3.1" data-path="list.html"><a href="list.html#attributi-di-una-lista"><i class="fa fa-check"></i><b>11.3.1</b> Attributi di una Lista</a></li>
<li class="chapter" data-level="11.3.2" data-path="list.html"><a href="list.html#unire-liste"><i class="fa fa-check"></i><b>11.3.2</b> Unire Liste</a></li>
<li class="chapter" data-level="11.3.3" data-path="list.html"><a href="list.html#informazioni-lista"><i class="fa fa-check"></i><b>11.3.3</b> Informazioni Lista</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="list.html"><a href="list.html#struttura-nested"><i class="fa fa-check"></i><b>11.4</b> Struttura Nested</a></li>
</ul></li>
<li class="part"><span><b>Algoritmi</b></span></li>
<li class="chapter" data-level="" data-path="third-section.html"><a href="third-section.html"><i class="fa fa-check"></i>Introduzione</a></li>
<li class="chapter" data-level="12" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>12</b> Definizione di Funzioni</a><ul>
<li class="chapter" data-level="12.1" data-path="functions.html"><a href="functions.html#creazione-di-una-funzione"><i class="fa fa-check"></i><b>12.1</b> Creazione di una Funzione</a><ul>
<li class="chapter" data-level="12.1.1" data-path="functions.html"><a href="functions.html#definire-input-e-output"><i class="fa fa-check"></i><b>12.1.1</b> Definire Input e Output</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#esercizi-14"><i class="fa fa-check"></i>Esercizi</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="functions.html"><a href="functions.html#lavorare-con-le-funzioni"><i class="fa fa-check"></i><b>12.2</b> Lavorare con le Funzioni</a></li>
<li class="chapter" data-level="12.3" data-path="functions.html"><a href="functions.html#ambiente-della-funzione"><i class="fa fa-check"></i><b>12.3</b> Ambiente della funzione</a></li>
<li class="chapter" data-level="12.4" data-path="functions.html"><a href="functions.html#best-practice"><i class="fa fa-check"></i><b>12.4</b> Best practice</a><ul>
<li class="chapter" data-level="12.4.1" data-path="functions.html"><a href="functions.html#quando-serve-una-funzione"><i class="fa fa-check"></i><b>12.4.1</b> Quando serve una funzione?</a></li>
<li class="chapter" data-level="12.4.2" data-path="functions.html"><a href="functions.html#scegliere-il-nome"><i class="fa fa-check"></i><b>12.4.2</b> Scegliere il nome</a></li>
<li class="chapter" data-level="12.4.3" data-path="functions.html"><a href="functions.html#semplificare-la-quantita-di-operazioni-e-output"><i class="fa fa-check"></i><b>12.4.3</b> Semplificare la quantita di operazioni e output</a></li>
<li class="chapter" data-level="12.4.4" data-path="functions.html"><a href="functions.html#commentare-e-documentare"><i class="fa fa-check"></i><b>12.4.4</b> Commentare e documentare</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="functions.html"><a href="functions.html#importare-una-funzione"><i class="fa fa-check"></i><b>12.5</b> Importare una funzione</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="conditionals.html"><a href="conditionals.html"><i class="fa fa-check"></i><b>13</b> Programmazione Condizionale</a><ul>
<li class="chapter" data-level="13.1" data-path="conditionals.html"><a href="conditionals.html#strutture-condizionali"><i class="fa fa-check"></i><b>13.1</b> Strutture condizionali</a><ul>
<li class="chapter" data-level="13.1.1" data-path="conditionals.html"><a href="conditionals.html#if"><i class="fa fa-check"></i><b>13.1.1</b> if</a></li>
<li class="chapter" data-level="13.1.2" data-path="conditionals.html"><a href="conditionals.html#ifelse"><i class="fa fa-check"></i><b>13.1.2</b> if…else</a></li>
<li class="chapter" data-level="13.1.3" data-path="conditionals.html"><a href="conditionals.html#nested"><i class="fa fa-check"></i><b>13.1.3</b> Nested</a></li>
<li class="chapter" data-level="" data-path="conditionals.html"><a href="conditionals.html#esercizi-15"><i class="fa fa-check"></i>Esercizi</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="conditionals.html"><a href="conditionals.html#altri-operatori-condizionali"><i class="fa fa-check"></i><b>13.2</b> Altri Operatori Condizionali</a><ul>
<li class="chapter" data-level="13.2.1" data-path="conditionals.html"><a href="conditionals.html#switch"><i class="fa fa-check"></i><b>13.2.1</b> switch</a></li>
<li class="chapter" data-level="13.2.2" data-path="conditionals.html"><a href="conditionals.html#ifelse-1"><i class="fa fa-check"></i><b>13.2.2</b> ifelse</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="loop.html"><a href="loop.html"><i class="fa fa-check"></i><b>14</b> Programmazione Iterativa</a><ul>
<li class="chapter" data-level="14.1" data-path="loop.html"><a href="loop.html#loop-1"><i class="fa fa-check"></i><b>14.1</b> Loop</a><ul>
<li class="chapter" data-level="14.1.1" data-path="loop.html"><a href="loop.html#for"><i class="fa fa-check"></i><b>14.1.1</b> For</a></li>
<li class="chapter" data-level="14.1.2" data-path="loop.html"><a href="loop.html#while"><i class="fa fa-check"></i><b>14.1.2</b> While</a></li>
<li class="chapter" data-level="14.1.3" data-path="loop.html"><a href="loop.html#next-e-brake"><i class="fa fa-check"></i><b>14.1.3</b> Next e Brake</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="loop.html"><a href="loop.html#nested-loop"><i class="fa fa-check"></i><b>14.2</b> Nested loop</a><ul>
<li class="chapter" data-level="" data-path="loop.html"><a href="loop.html#esercizi-16"><i class="fa fa-check"></i>Esercizi</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="loop.html"><a href="loop.html#apply-family"><i class="fa fa-check"></i><b>14.3</b> Apply Family</a><ul>
<li class="chapter" data-level="14.3.1" data-path="loop.html"><a href="loop.html#quali-funzioni-applicare"><i class="fa fa-check"></i><b>14.3.1</b> Quali funzioni applicare?</a></li>
<li class="chapter" data-level="14.3.2" data-path="loop.html"><a href="loop.html#apply"><i class="fa fa-check"></i><b>14.3.2</b> apply</a></li>
<li class="chapter" data-level="14.3.3" data-path="loop.html"><a href="loop.html#tapply"><i class="fa fa-check"></i><b>14.3.3</b> tapply</a></li>
<li class="chapter" data-level="14.3.4" data-path="loop.html"><a href="loop.html#lapply"><i class="fa fa-check"></i><b>14.3.4</b> lapply</a></li>
<li class="chapter" data-level="14.3.5" data-path="loop.html"><a href="loop.html#sapply"><i class="fa fa-check"></i><b>14.3.5</b> sapply</a></li>
<li class="chapter" data-level="14.3.6" data-path="loop.html"><a href="loop.html#vapply"><i class="fa fa-check"></i><b>14.3.6</b> vapply</a></li>
<li class="chapter" data-level="14.3.7" data-path="loop.html"><a href="loop.html#lista-di-funzioni-a-lista-di-oggetti"><i class="fa fa-check"></i><b>14.3.7</b> Lista di funzioni a lista di oggetti</a></li>
<li class="chapter" data-level="14.3.8" data-path="loop.html"><a href="loop.html#mapply"><i class="fa fa-check"></i><b>14.3.8</b> mapply</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="loop.html"><a href="loop.html#replicate"><i class="fa fa-check"></i><b>14.4</b> Replicate</a></li>
</ul></li>
<li class="part"><span><b>Case study</b></span></li>
<li class="chapter" data-level="" data-path="introduzione-1.html"><a href="introduzione-1.html"><i class="fa fa-check"></i>Introduzione</a></li>
<li class="chapter" data-level="15" data-path="attachment.html"><a href="attachment.html"><i class="fa fa-check"></i><b>15</b> Caso Studio I: Attaccamento</a><ul>
<li class="chapter" data-level="15.1" data-path="attachment.html"><a href="attachment.html#infobox"><i class="fa fa-check"></i><b>15.1</b> Infobox</a></li>
</ul></li>
<li class="part"><span><b>Argomenti avanzati</b></span></li>
<li class="chapter" data-level="" data-path="fourth-section.html"><a href="fourth-section.html"><i class="fa fa-check"></i>Introduzione</a></li>
<li class="chapter" data-level="16" data-path="stringhe.html"><a href="stringhe.html"><i class="fa fa-check"></i><b>16</b> Stringhe</a><ul>
<li class="chapter" data-level="16.1" data-path="stringhe.html"><a href="stringhe.html#confrontare-stringhe"><i class="fa fa-check"></i><b>16.1</b> Confrontare stringhe</a></li>
<li class="chapter" data-level="16.2" data-path="stringhe.html"><a href="stringhe.html#comporre-stringhe"><i class="fa fa-check"></i><b>16.2</b> Comporre stringhe</a><ul>
<li class="chapter" data-level="16.2.1" data-path="stringhe.html"><a href="stringhe.html#tolower-e-toupper"><i class="fa fa-check"></i><b>16.2.1</b> <code>tolower()</code> e <code>toupper()</code></a></li>
<li class="chapter" data-level="16.2.2" data-path="stringhe.html"><a href="stringhe.html#paste-e-paste0"><i class="fa fa-check"></i><b>16.2.2</b> <code>paste()</code> e <code>paste0()</code></a></li>
<li class="chapter" data-level="16.2.3" data-path="stringhe.html"><a href="stringhe.html#sprinf"><i class="fa fa-check"></i><b>16.2.3</b> <code>sprinf()</code></a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="stringhe.html"><a href="stringhe.html#indicizzare-stringhe"><i class="fa fa-check"></i><b>16.3</b> Indicizzare stringhe</a><ul>
<li class="chapter" data-level="16.3.1" data-path="stringhe.html"><a href="stringhe.html#nchar"><i class="fa fa-check"></i><b>16.3.1</b> <code>nchar()</code></a></li>
<li class="chapter" data-level="16.3.2" data-path="stringhe.html"><a href="stringhe.html#gregexpr-e-regexpr"><i class="fa fa-check"></i><b>16.3.2</b> <code>gregexpr()</code> e <code>regexpr()</code></a></li>
<li class="chapter" data-level="16.3.3" data-path="stringhe.html"><a href="stringhe.html#substr-e-substring"><i class="fa fa-check"></i><b>16.3.3</b> <code>substr()</code> e <code>substring()</code></a></li>
<li class="chapter" data-level="16.3.4" data-path="stringhe.html"><a href="stringhe.html#startwith-e-endswith"><i class="fa fa-check"></i><b>16.3.4</b> <code>startWith()</code> e <code>endsWith()</code></a></li>
<li class="chapter" data-level="16.3.5" data-path="stringhe.html"><a href="stringhe.html#grep-e-grepl"><i class="fa fa-check"></i><b>16.3.5</b> <code>grep()</code> e <code>grepl()</code></a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="stringhe.html"><a href="stringhe.html#manipolare-stringhe"><i class="fa fa-check"></i><b>16.4</b> Manipolare stringhe</a><ul>
<li class="chapter" data-level="16.4.1" data-path="stringhe.html"><a href="stringhe.html#gsub-e-sub"><i class="fa fa-check"></i><b>16.4.1</b> <code>gsub()</code> e <code>sub()</code></a></li>
<li class="chapter" data-level="16.4.2" data-path="stringhe.html"><a href="stringhe.html#strsplit"><i class="fa fa-check"></i><b>16.4.2</b> <code>strsplit()</code></a></li>
</ul></li>
<li class="chapter" data-level="16.5" data-path="stringhe.html"><a href="stringhe.html#regular-expression-regex"><i class="fa fa-check"></i><b>16.5</b> Regular Expression (REGEX)</a></li>
<li class="chapter" data-level="16.6" data-path="stringhe.html"><a href="stringhe.html#per-approfondire"><i class="fa fa-check"></i><b>16.6</b> Per approfondire</a><ul>
<li class="chapter" data-level="16.6.1" data-path="stringhe.html"><a href="stringhe.html#risorse-utili-1"><i class="fa fa-check"></i><b>16.6.1</b> Risorse utili</a></li>
<li class="chapter" data-level="16.6.2" data-path="stringhe.html"><a href="stringhe.html#altre-funzioni-utili"><i class="fa fa-check"></i><b>16.6.2</b> Altre funzioni utili</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"><span style="font-size: 2.5em">Introduction to R</span></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<head>
  <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=10.0,initial-scale=1.0">
  <!--script src="https://kit.fontawesome.com/6a26f47516.js"></script-->
  <script src="assets/hideOutput.js"></script>
  <link href="assets/style.css" rel="stylesheet">
</head>



<div class="hero-image-container">
  <img class= "hero-image" src="images/banner.png">
</div>
<div id="functions" class="section level1">
<h1><span class="header-section-number">Capitolo 12</span> Definizione di Funzioni</h1>
<p>Nel Capitolo <a href="objects-functions.html#functions-def">4.2</a> abbiamo introdotto il concetto di funzioni e abbiamo visto come queste siano utilizzate per manipolare gli oggetti in R ed eseguire innumerevoli compiti. Nel Capitolo <a href="working-environment.html#packages">5.3</a> abbiamo visto inoltre come sia possibile utilizzare i pacchetti per accedere a nuove funzioni estendendo quindi notevolmente le possibili applicazioni di R. In R, tuttavia, è anche possibile definire le proprie funzioni per eseguire determinati compiti a seconda delle proprie specifiche necessità.</p>
<p>Questo è uno dei vantaggi principali di utilizzare un linguaggio di programmazione, ovvero il poter sviluppare funzioni ad-hoc a seconda delle proprie esigenze e non limitarsi a quelle prestabilite. In questo capitolo descriveremo come creare le proprie funzioni in R.</p>
<div id="creazione-di-una-funzione" class="section level2">
<h2><span class="header-section-number">12.1</span> Creazione di una Funzione</h2>
<p>Il comando usato per creare una funzione in R è <code>function()</code> seguito da una coppia di parentesi graffe <code>{ }</code> al cui interno deve essere specificato il corpo della funzione:</p>
<div class="sourceCode" id="cb248"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb248-1"><a href="functions.html#cb248-1"></a>nome_funzione &lt;-<span class="st"> </span><span class="cf">function</span>( ){</span>
<span id="cb248-2"><a href="functions.html#cb248-2"></a>  <span class="op">&lt;</span>corpo<span class="op">-</span>funzione<span class="op">&gt;</span></span>
<span id="cb248-3"><a href="functions.html#cb248-3"></a>}</span></code></pre></div>
<p>Nota come sia necessario assegnare la funzione ad un oggetto, ad esempio <code>my_function</code>, che diventerà il nome della nostra funzione. Per eseguire la funzione sarà sufficiente, come per ogni altra funzione, indicare il nome della funzione seguito dalle parentesi tonde, nel nostro caso <code>my_function()</code>. Vediamo alcuni esempi di semplici funzioni:</p>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb249-1"><a href="functions.html#cb249-1"></a><span class="co"># Definisco la funzione</span></span>
<span id="cb249-2"><a href="functions.html#cb249-2"></a>my_greetings &lt;-<span class="st"> </span><span class="cf">function</span>(){</span>
<span id="cb249-3"><a href="functions.html#cb249-3"></a>  <span class="kw">print</span>(<span class="st">&quot;Hello World!&quot;</span>)</span>
<span id="cb249-4"><a href="functions.html#cb249-4"></a>}</span>
<span id="cb249-5"><a href="functions.html#cb249-5"></a></span>
<span id="cb249-6"><a href="functions.html#cb249-6"></a><span class="kw">my_greetings</span>()</span>
<span id="cb249-7"><a href="functions.html#cb249-7"></a><span class="co">## [1] &quot;Hello World!&quot;</span></span>
<span id="cb249-8"><a href="functions.html#cb249-8"></a></span>
<span id="cb249-9"><a href="functions.html#cb249-9"></a><span class="co"># Definisco un&#39;altra funzione</span></span>
<span id="cb249-10"><a href="functions.html#cb249-10"></a>my_sum &lt;-<span class="st"> </span><span class="cf">function</span>(){</span>
<span id="cb249-11"><a href="functions.html#cb249-11"></a>  x &lt;-<span class="st"> </span><span class="dv">7</span></span>
<span id="cb249-12"><a href="functions.html#cb249-12"></a>  y &lt;-<span class="st"> </span><span class="dv">3</span></span>
<span id="cb249-13"><a href="functions.html#cb249-13"></a>  </span>
<span id="cb249-14"><a href="functions.html#cb249-14"></a>  x <span class="op">+</span><span class="st"> </span>y</span>
<span id="cb249-15"><a href="functions.html#cb249-15"></a>}</span>
<span id="cb249-16"><a href="functions.html#cb249-16"></a></span>
<span id="cb249-17"><a href="functions.html#cb249-17"></a><span class="kw">my_sum</span>()</span>
<span id="cb249-18"><a href="functions.html#cb249-18"></a><span class="co">## [1] 10</span></span></code></pre></div>
<p>Quando chiamiamo la nostra funzione, R eseguirà il corpo della funzione e ci restituirà il risultato dell’ultimo comando eseguito. Le funzioni del precedente esempio, tuttavia, si rivelano poco utili poichè eseguono sempre le stesse operazioni senza che ci sia permesso di specificare gli input delle funzioni. Inoltre, sebbene siano funzioni molto semplici, potrebbe non risultare chiaro quale sia effettivamente l’output restituito dalla funzione.</p>
<p>:::{design title=“Nomi Funzioni” data-latex=“[Nomi Funzioni]”}
Nel definire il nome di una funzione è utile seguire le stese indicazioni che riguardavano i nomi degli oggetti (vedi Capitolo <a href="objects-functions.html#objects-names">4.1.2</a>). In questo caso affinché un nome sia <strong>auto-descrittivo</strong> si tende ad utilizzare verbi che riassumano l’azione eseguita dalla funzione.
:::</p>
<div id="definire-input-e-output" class="section level3">
<h3><span class="header-section-number">12.1.1</span> Definire Input e Output</h3>
<p>Ricordiamo che in generale le funzioni, ricevuti degli oggetti in input, compiono determinate azioni e restituiscono dei nuovi oggetti in output. Input e ouput sono quindi due aspetti aspetti fondamentali di ogni funzione che richiedono particolare attenzione.</p>
<ul>
<li><strong>Input</strong> - Abbiamo anche visto che in R gli input vengono specificati attraverso gli <strong>argomenti</strong> di una funzione (vedi Capitolo <a href="objects-functions.html#function-arguments">4.2.1</a>). Per definire gli argomenti di una funzione, questi devono essere indicati all’interno delle parentesi tonde al momento della creazione della funzione</li>
<li><strong>Output</strong> - Per specificare l’output di una funzione si utilizza la funzione <code>return()</code>, indicando tra le parentesi il nome dell’oggetto che si desidera restituire come risultato della funzione.</li>
</ul>
<p>La definizione di una funzione con tutti i suoi elementi seguirà quindi il seguente schema:</p>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb250-1"><a href="functions.html#cb250-1"></a>nome_funzione &lt;-<span class="st"> </span><span class="cf">function</span>(argument_<span class="dv">1</span>, argument_<span class="dv">2</span>, ...){</span>
<span id="cb250-2"><a href="functions.html#cb250-2"></a>  <span class="op">&lt;</span>corpo<span class="op">-</span>funzione<span class="op">&gt;</span></span>
<span id="cb250-3"><a href="functions.html#cb250-3"></a><span class="st">  </span></span>
<span id="cb250-4"><a href="functions.html#cb250-4"></a><span class="st">  </span><span class="kw">return</span>(<span class="op">&lt;</span>nome<span class="op">-</span>output<span class="op">&gt;</span>)</span>
<span id="cb250-5"><a href="functions.html#cb250-5"></a>}</span></code></pre></div>
<p>Possiamo ora riscrivere le precedenti funzioni permettendo di personalizzare gli input e evidenziando quale sia output che viene restituito.</p>
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb251-1"><a href="functions.html#cb251-1"></a><span class="co"># Ridefinisco my_greetings()</span></span>
<span id="cb251-2"><a href="functions.html#cb251-2"></a>my_greetings &lt;-<span class="st"> </span><span class="cf">function</span>(name){</span>
<span id="cb251-3"><a href="functions.html#cb251-3"></a>  greetings &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&quot;Hello &quot;</span>, name, <span class="st">&quot;!&quot;</span>)</span>
<span id="cb251-4"><a href="functions.html#cb251-4"></a>  </span>
<span id="cb251-5"><a href="functions.html#cb251-5"></a>  <span class="kw">return</span>(greetings)</span>
<span id="cb251-6"><a href="functions.html#cb251-6"></a>}</span>
<span id="cb251-7"><a href="functions.html#cb251-7"></a></span>
<span id="cb251-8"><a href="functions.html#cb251-8"></a><span class="kw">my_greetings</span>(<span class="dt">name =</span> <span class="st">&quot;Psicostat&quot;</span>)</span>
<span id="cb251-9"><a href="functions.html#cb251-9"></a><span class="co">## [1] &quot;Hello Psicostat!&quot;</span></span>
<span id="cb251-10"><a href="functions.html#cb251-10"></a></span>
<span id="cb251-11"><a href="functions.html#cb251-11"></a><span class="co"># Ridefinisco my_sum()</span></span>
<span id="cb251-12"><a href="functions.html#cb251-12"></a>my_sum &lt;-<span class="st"> </span><span class="cf">function</span>(x, y){</span>
<span id="cb251-13"><a href="functions.html#cb251-13"></a>  result &lt;-<span class="st"> </span>x <span class="op">+</span><span class="st"> </span>y</span>
<span id="cb251-14"><a href="functions.html#cb251-14"></a>  </span>
<span id="cb251-15"><a href="functions.html#cb251-15"></a>  <span class="kw">return</span>(result)</span>
<span id="cb251-16"><a href="functions.html#cb251-16"></a>}</span>
<span id="cb251-17"><a href="functions.html#cb251-17"></a></span>
<span id="cb251-18"><a href="functions.html#cb251-18"></a><span class="kw">my_sum</span>(<span class="dt">x =</span> <span class="dv">8</span>, <span class="dt">y =</span> <span class="dv">6</span>)</span>
<span id="cb251-19"><a href="functions.html#cb251-19"></a><span class="co">## [1] 14</span></span></code></pre></div>
<div class="design" title="User Input">
<p>Qualora fosse necessario è possibile fare in modo che sia la funzione stessa a chiedere all’utente di inserire delle specifiche informazioni attraverso la funzione <code>readline()</code>.</p>
<p>Utilizzando la funzione <code>readline()</code> comparirà nella console il messaggio che abbiamo impostato nell’argomento <code>prompt</code> (ricordati di concludere lasciando uno spazio). All’utente sarà richiesto di digitare una qualche sequenza alfanumeirca e premere successivamente <em>invio</em>. I valori inseriti dell’utente saranno salvati come una variabile caratteri nell’oggetto che abbiamo indicato e potranno essere utilizzati sucessivamente nella funzione.</p>
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb252-1"><a href="functions.html#cb252-1"></a>happy_birthday &lt;-<span class="st"> </span><span class="cf">function</span>(){</span>
<span id="cb252-2"><a href="functions.html#cb252-2"></a>  name &lt;-<span class="st"> </span><span class="kw">readline</span>(<span class="dt">prompt =</span> <span class="st">&quot;Inserisci il tuo nome: &quot;</span>)</span>
<span id="cb252-3"><a href="functions.html#cb252-3"></a>  message &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&quot;Buon Compleanno &quot;</span>, name, <span class="st">&quot;!&quot;</span>)</span>
<span id="cb252-4"><a href="functions.html#cb252-4"></a>  </span>
<span id="cb252-5"><a href="functions.html#cb252-5"></a>  <span class="kw">return</span>(message)</span>
<span id="cb252-6"><a href="functions.html#cb252-6"></a>}</span>
<span id="cb252-7"><a href="functions.html#cb252-7"></a></span>
<span id="cb252-8"><a href="functions.html#cb252-8"></a><span class="kw">happy_birthday</span>()</span></code></pre></div>
<p>Nota che questa funzione possona essere usata solo in sessioni interattive di R poichè è richiesta un ’azione diretta da parte dell’utente.</p>
</div>
<div id="default-argomenti" class="section level4 unnumbered">
<h4>Default Argomenti</h4>
<p>Abbiamo visto come aggiungere degli argomenti che devono essere definiti dall’utente nell’utilizzare la funzione. Qualora l’utente non specifichi uno o più argomenti R riporterà un messaggio di errore indicando come ci siano degli argomenti non specificati e senza valori di default.</p>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb253-1"><a href="functions.html#cb253-1"></a><span class="kw">my_sum</span>(<span class="dt">x =</span> <span class="dv">5</span>)</span>
<span id="cb253-2"><a href="functions.html#cb253-2"></a><span class="co">## Error in my_sum(x = 5): argument &quot;y&quot; is missing, with no default</span></span></code></pre></div>
<p>Per assegnare dei valori di default agli argomenti di una funzione, è sufficiente indicare al momento della creazione all’interno delle parentesi tonde <code>nome_argomento = &lt;valore-default&gt;</code>. Se non altrimenti specificati, gli argomenti assumeranno i loro valori di default. Tuttavia, gli utenti sono liberi di specificare gli argomenti della funzione a seconda delle loro esigenze. Ad esempio impostiamo nella funzione <code>my_sum()</code> il valore di default <code>y = 10</code>.</p>
<div class="sourceCode" id="cb254"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb254-1"><a href="functions.html#cb254-1"></a>my_sum &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">y =</span> <span class="dv">10</span>){</span>
<span id="cb254-2"><a href="functions.html#cb254-2"></a>  result &lt;-<span class="st"> </span>x <span class="op">+</span><span class="st"> </span>y</span>
<span id="cb254-3"><a href="functions.html#cb254-3"></a>  </span>
<span id="cb254-4"><a href="functions.html#cb254-4"></a>  <span class="kw">return</span>(result)</span>
<span id="cb254-5"><a href="functions.html#cb254-5"></a>}</span>
<span id="cb254-6"><a href="functions.html#cb254-6"></a></span>
<span id="cb254-7"><a href="functions.html#cb254-7"></a><span class="co"># Utilizzo il valore di default di y</span></span>
<span id="cb254-8"><a href="functions.html#cb254-8"></a><span class="kw">my_sum</span>(<span class="dt">x =</span> <span class="dv">5</span>)</span>
<span id="cb254-9"><a href="functions.html#cb254-9"></a><span class="co">## [1] 15</span></span>
<span id="cb254-10"><a href="functions.html#cb254-10"></a></span>
<span id="cb254-11"><a href="functions.html#cb254-11"></a><span class="co"># Specifico il valore id y</span></span>
<span id="cb254-12"><a href="functions.html#cb254-12"></a><span class="kw">my_sum</span>(<span class="dt">x =</span> <span class="dv">5</span>,  <span class="dt">y =</span> <span class="dv">8</span>)</span>
<span id="cb254-13"><a href="functions.html#cb254-13"></a><span class="co">## [1] 13</span></span></code></pre></div>
<p>Questa pratica è molto usata per specificare comportamenti particolari delle funzioni. In genere le funzioni sono definite con un funzionameto di default ma alcuni argomenti possono essere specificati per particolari essigenze solo quando necessario.</p>
<div class="trick" title="match.arg()">
<p>Per imporre la scelta di un argomento tra una limitata serie di valori è possibile indicare nella definizione dell’argomento un vettore con le possibili entrate. Successivamente la scelta deve essere validata attraverso la funzione <code>match.arg()</code> come nell esempio successivo:</p>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb255-1"><a href="functions.html#cb255-1"></a><span class="co"># Ridefinisco my_greetings()</span></span>
<span id="cb255-2"><a href="functions.html#cb255-2"></a>my_greetings &lt;-<span class="st"> </span><span class="cf">function</span>(name, <span class="dt">type =</span> <span class="kw">c</span>(<span class="st">&quot;Hello&quot;</span>, <span class="st">&quot;Goodbye&quot;</span>)){</span>
<span id="cb255-3"><a href="functions.html#cb255-3"></a>  </span>
<span id="cb255-4"><a href="functions.html#cb255-4"></a>  type &lt;-<span class="st"> </span><span class="kw">match.arg</span>(type)</span>
<span id="cb255-5"><a href="functions.html#cb255-5"></a>  greetings &lt;-<span class="st"> </span><span class="kw">paste0</span>(type,<span class="st">&quot; &quot;</span>, name, <span class="st">&quot;!&quot;</span>)</span>
<span id="cb255-6"><a href="functions.html#cb255-6"></a>  </span>
<span id="cb255-7"><a href="functions.html#cb255-7"></a>  <span class="kw">return</span>(greetings)</span>
<span id="cb255-8"><a href="functions.html#cb255-8"></a>}</span>
<span id="cb255-9"><a href="functions.html#cb255-9"></a></span>
<span id="cb255-10"><a href="functions.html#cb255-10"></a><span class="co"># Scelta type</span></span>
<span id="cb255-11"><a href="functions.html#cb255-11"></a><span class="kw">my_greetings</span>(<span class="dt">name =</span> <span class="st">&quot;Psicostat&quot;</span>, <span class="dt">type =</span> <span class="st">&quot;Goodbye&quot;</span>)</span>
<span id="cb255-12"><a href="functions.html#cb255-12"></a><span class="co">## [1] &quot;Goodbye Psicostat!&quot;</span></span>
<span id="cb255-13"><a href="functions.html#cb255-13"></a></span>
<span id="cb255-14"><a href="functions.html#cb255-14"></a><span class="co"># Valore default</span></span>
<span id="cb255-15"><a href="functions.html#cb255-15"></a><span class="kw">my_greetings</span>(<span class="dt">name =</span> <span class="st">&quot;Psicostat&quot;</span>)</span>
<span id="cb255-16"><a href="functions.html#cb255-16"></a><span class="co">## [1] &quot;Hello Psicostat!&quot;</span></span>
<span id="cb255-17"><a href="functions.html#cb255-17"></a></span>
<span id="cb255-18"><a href="functions.html#cb255-18"></a><span class="co"># Valore non ammesso</span></span>
<span id="cb255-19"><a href="functions.html#cb255-19"></a><span class="kw">my_greetings</span>(<span class="dt">name =</span> <span class="st">&quot;Psicostat&quot;</span>, <span class="dt">type =</span> <span class="st">&quot;Guten Tag&quot;</span>)</span>
<span id="cb255-20"><a href="functions.html#cb255-20"></a><span class="co">## Error in match.arg(type): &#39;arg&#39; should be one of &quot;Hello&quot;, &quot;Goodbye&quot;</span></span></code></pre></div>
<p>La funzione <code>match.arg()</code> permette di confrontare il valore specificato risspetto a quelli indicati nella definizione dell’argomento, riportando un errore in mancanza di un match. Osserva come se non specificato il valore di default sia il primo indicato nella definizione.</p>
</div>
</div>
</div>
<div id="esercizi-14" class="section level3 unnumbered">
<h3>Esercizi</h3>
<p>Esegui i seguenti esercizi:</p>
<ol style="list-style-type: decimal">
<li>definisci una funzione che trasformi la temperatura da Celsius a Fahrenheit
<span class="math display">\[
  Fahrenheit = Celsius *1.8 + 32
  \]</span></li>
<li>Definisci una funzione che permetta di fare gli auguri di buon natale e buona pasqua ad una persona.</li>
<li>Definisci una funzione che, dato un vettore di valori numerici, calcoli il numero di elementi e la loro media.</li>
<li>Definisci una funzione iterattiva che calcoli il prodotto di due valori. Gli input devono essere ottenuti conlla funzione <code>readline()</code>.</li>
<li>Definisci una funzione che calcoli lo stipendio mensile sulla base delle ore svolte nel mese e la paga oraria.</li>
</ol>
</div>
</div>
<div id="lavorare-con-le-funzioni" class="section level2">
<h2><span class="header-section-number">12.2</span> Lavorare con le Funzioni</h2>
<p>Le funzioni sono sicuramente l’aspetto più utile e avanzato del linguaggio R e in generale dei linguaggi di programmazione. I pacchetti che sono sviluppati in R non sono altro che insieme di funzioni che lavorano assieme per uno scopo preciso. Oltre allo scopo della funzione è importante capire come gestire gli <strong>errori e gli imprevisti</strong>. Se la funzione infatti accetta degli argomenti, l’utente finale o noi stessi che la utilizziamo possiamo erroneamente usarla nel modo sbagliato. E’ importante quindi capire come leggere gli errori ma sopratutto creare messaggi di errore o di avvertimento utili per l’utilizzo della funzione.</p>
<p>Prendiamo ad esempio la funzione somma <code>+</code>, anche se non sembra infatti l’operatore <code>+</code> è in realtà una funzione. Se volessimo scriverlo come una funzione simile a quelle viste in precedenza possiamo:</p>
<div class="sourceCode" id="cb256"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb256-1"><a href="functions.html#cb256-1"></a>my_sum &lt;-<span class="st"> </span><span class="cf">function</span>(x, y){</span>
<span id="cb256-2"><a href="functions.html#cb256-2"></a>  res &lt;-<span class="st"> </span>x <span class="op">+</span><span class="st"> </span>y</span>
<span id="cb256-3"><a href="functions.html#cb256-3"></a>  <span class="kw">return</span>(res)</span>
<span id="cb256-4"><a href="functions.html#cb256-4"></a>}</span>
<span id="cb256-5"><a href="functions.html#cb256-5"></a></span>
<span id="cb256-6"><a href="functions.html#cb256-6"></a><span class="kw">my_sum</span>(<span class="dv">1</span>, <span class="dv">5</span>)</span>
<span id="cb256-7"><a href="functions.html#cb256-7"></a><span class="co">## [1] 6</span></span></code></pre></div>
<p>Abbiamo definito una (abbastanza inutile) funzione per calcolare la somma tra due numeri. Cosa succede se proviamo a sommare un numero con una stringa? Ovviamente è un’operazione che non ha senso e ci aspettiamo un qualche tipo di errore:</p>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb257-1"><a href="functions.html#cb257-1"></a><span class="kw">my_sum</span>(<span class="st">&quot;stringa&quot;</span>, <span class="dv">5</span>)</span>
<span id="cb257-2"><a href="functions.html#cb257-2"></a><span class="co">## Error in x + y: non-numeric argument to binary operator</span></span></code></pre></div>
<p>In questo caso infatti, vediamo un messaggio denominato <code>Error...</code> con l’utile informazione che uno degli argomenti utilizzati risulta essere <code>non-numeric</code>. E’ un messaggio semplice, mirato e sopratutto non fornisce un risultato perchè una condizione fondamentale (la somma vale solo per i numeri) non è rispettata. La funzione <code>+</code> ha già al suo interno questo controllo, ma se noi volessimo implementare un <strong>controllo</strong> e fornire un <strong>messaggio</strong> abbiamo a disposizione diverse opzioni:</p>
<ul>
<li><code>stop(&lt;message&gt;, .call = TRUE)</code>: Se inserito all’interno di una funzione, interrompe l’esecuzione e fornisce il messaggio specificato denominato come <code>Error</code>.</li>
<li><code>stopifnot(expr1, expr2, ...)</code>: Se inserito all’interno di una funzione interrompe l’esecuzione se almeno una di una serie di condizioni risulta come <strong>non VERA</strong>.</li>
<li><code>warning()</code>: Restituisce un messaggio all’utente senza tuttavia interrompere l’esecuzione ma fornendo informazioni su un possibile problema che deriva dal tipo di input o da un possibile effetto collaterale della funzione.</li>
<li><code>message()</code>: Fornisce un semplice messaggio senza alterare l’esecuzione della funzione che può essere utile per informare rispetto ad operazioni eseguite</li>
</ul>
<p>Tornando all’esempio della somma, immaginiamo di voler scrivere una funzione che somma solo numeri positivi. In altri termini vogliamo che i valori <code>x</code> e <code>y</code> in input siano solo posiviti per poter eseguire la funzione. Possiamo quindi inserire un <code>controllo condizionale</code> e usare la funzione <code>stop()</code> nel caso in cui la condizione non sia rispettata:</p>
<div class="sourceCode" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb258-1"><a href="functions.html#cb258-1"></a>my_positive_sum &lt;-<span class="st"> </span><span class="cf">function</span>(x, y){</span>
<span id="cb258-2"><a href="functions.html#cb258-2"></a>  <span class="cf">if</span>(x <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span> <span class="op">|</span><span class="st"> </span>y <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span>){</span>
<span id="cb258-3"><a href="functions.html#cb258-3"></a>    <span class="kw">stop</span>(<span class="st">&quot;Gli argomenti devono essere numeri positivi!&quot;</span>)</span>
<span id="cb258-4"><a href="functions.html#cb258-4"></a>  }</span>
<span id="cb258-5"><a href="functions.html#cb258-5"></a>  res &lt;-<span class="st"> </span>x <span class="op">+</span><span class="st"> </span>y</span>
<span id="cb258-6"><a href="functions.html#cb258-6"></a>  <span class="kw">return</span>(res)</span>
<span id="cb258-7"><a href="functions.html#cb258-7"></a>}</span>
<span id="cb258-8"><a href="functions.html#cb258-8"></a></span>
<span id="cb258-9"><a href="functions.html#cb258-9"></a><span class="kw">my_positive_sum</span>(<span class="dv">10</span>, <span class="dv">5</span>)</span>
<span id="cb258-10"><a href="functions.html#cb258-10"></a><span class="co">## [1] 15</span></span>
<span id="cb258-11"><a href="functions.html#cb258-11"></a><span class="kw">my_positive_sum</span>(<span class="dv">10</span>, <span class="dv">-5</span>)</span>
<span id="cb258-12"><a href="functions.html#cb258-12"></a><span class="co">## Error in my_positive_sum(10, -5): Gli argomenti devono essere numeri positivi!</span></span></code></pre></div>
<p>Un modo più rapido di gestire l’arresto dell’esecuzione è usare <code>stopifnot()</code>. La logica tuttavia è leggermente diversa rispetto ad usare un <code>if</code> + <code>stop()</code>. Nell’esempio precedente la logica è: “se x oppure y sono minori di 0, stop”. Con <code>stopifnot()</code> utilizziamo una logica inversa, ovvero inseriamo quello che vogliamo sia <strong>VERO</strong> e fermiamo l’esecuzione se è <strong>FALSO</strong>. Nel nostro caso usiamo <code>stopifnot(x &gt; 0, y &gt; 0)</code> ovvero fermati se x oppure y <em>NON SONO</em> maggiori di 0. Rispetto a <code>stop()</code> non fornisce un messaggio personalizzato ma restituisce la prima delle condizioni specificate che non è rispettata:</p>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb259-1"><a href="functions.html#cb259-1"></a>my_positive_sum &lt;-<span class="st"> </span><span class="cf">function</span>(x, y){</span>
<span id="cb259-2"><a href="functions.html#cb259-2"></a>  <span class="kw">stopifnot</span>(x <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>, y <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>)</span>
<span id="cb259-3"><a href="functions.html#cb259-3"></a>  res &lt;-<span class="st"> </span>x <span class="op">+</span><span class="st"> </span>y</span>
<span id="cb259-4"><a href="functions.html#cb259-4"></a>  <span class="kw">return</span>(res)</span>
<span id="cb259-5"><a href="functions.html#cb259-5"></a>}</span>
<span id="cb259-6"><a href="functions.html#cb259-6"></a><span class="kw">my_positive_sum</span>(<span class="dv">10</span>, <span class="dv">-5</span>)</span>
<span id="cb259-7"><a href="functions.html#cb259-7"></a><span class="co">## Error in my_positive_sum(10, -5): y &gt; 0 is not TRUE</span></span></code></pre></div>
<p>Allo stesso modo immaginiamo (con molta immaginazione) che la nostra funzione non sia affidabile con numeri minori di 10, nel senso che qualche volta potrebbe sbagliare il risultato. In questo caso non vogliamo interrompere l’esecuzione ma fornire un messaggi di <code>warning</code>:</p>
<div class="sourceCode" id="cb260"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb260-1"><a href="functions.html#cb260-1"></a>my_positive_sum &lt;-<span class="st"> </span><span class="cf">function</span>(x, y){</span>
<span id="cb260-2"><a href="functions.html#cb260-2"></a>  <span class="co"># Error</span></span>
<span id="cb260-3"><a href="functions.html#cb260-3"></a>  <span class="cf">if</span>(x <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span> <span class="op">|</span><span class="st"> </span>y <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span>){</span>
<span id="cb260-4"><a href="functions.html#cb260-4"></a>    <span class="kw">stop</span>(<span class="st">&quot;Gli argomenti devono essere numeri positivi!&quot;</span>)</span>
<span id="cb260-5"><a href="functions.html#cb260-5"></a>  }</span>
<span id="cb260-6"><a href="functions.html#cb260-6"></a>  <span class="co"># Warning</span></span>
<span id="cb260-7"><a href="functions.html#cb260-7"></a>  <span class="cf">if</span>(x <span class="op">&lt;</span><span class="st"> </span><span class="dv">10</span> <span class="op">|</span><span class="st"> </span>y <span class="op">&lt;</span><span class="st"> </span><span class="dv">10</span>){</span>
<span id="cb260-8"><a href="functions.html#cb260-8"></a>    <span class="kw">warning</span>(<span class="st">&quot;Per qualche strano motivo la funzione non gestisce bene i numeri minori di 10, attenzione!! :)&quot;</span>)</span>
<span id="cb260-9"><a href="functions.html#cb260-9"></a>  }</span>
<span id="cb260-10"><a href="functions.html#cb260-10"></a>  res &lt;-<span class="st"> </span>x <span class="op">+</span><span class="st"> </span>y</span>
<span id="cb260-11"><a href="functions.html#cb260-11"></a>  <span class="kw">return</span>(res)</span>
<span id="cb260-12"><a href="functions.html#cb260-12"></a>}</span>
<span id="cb260-13"><a href="functions.html#cb260-13"></a></span>
<span id="cb260-14"><a href="functions.html#cb260-14"></a><span class="kw">my_positive_sum</span>(<span class="dv">15</span>, <span class="dv">4</span>)</span>
<span id="cb260-15"><a href="functions.html#cb260-15"></a><span class="co">## Warning in my_positive_sum(15, 4): Per qualche strano motivo la funzione non</span></span>
<span id="cb260-16"><a href="functions.html#cb260-16"></a><span class="co">## gestisce bene i numeri minori di 10, attenzione!! :)</span></span>
<span id="cb260-17"><a href="functions.html#cb260-17"></a><span class="co">## [1] 19</span></span></code></pre></div>
<p>Come vedete, abbiamo il risultato (ovviamente corretto) ma anche un messaggio di <code>warning</code> che ci avverte di questa possibile (ma non critica) problematica.</p>
<p>Infine possiamo accompagnare il risultato alcune condizioni che si realizzano con un semplice messaggio che fornisce ulteriori informazioni con la funzione <code>message()</code>:</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb261-1"><a href="functions.html#cb261-1"></a>my_positive_sum &lt;-<span class="st"> </span><span class="cf">function</span>(x, y){</span>
<span id="cb261-2"><a href="functions.html#cb261-2"></a>  <span class="co"># Error</span></span>
<span id="cb261-3"><a href="functions.html#cb261-3"></a>  <span class="cf">if</span>(x <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span> <span class="op">|</span><span class="st"> </span>y <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span>){</span>
<span id="cb261-4"><a href="functions.html#cb261-4"></a>    <span class="kw">stop</span>(<span class="st">&quot;Gli argomenti devono essere numeri positivi!&quot;</span>)</span>
<span id="cb261-5"><a href="functions.html#cb261-5"></a>  }</span>
<span id="cb261-6"><a href="functions.html#cb261-6"></a>  <span class="co"># Warning</span></span>
<span id="cb261-7"><a href="functions.html#cb261-7"></a>  <span class="cf">if</span>(x <span class="op">&lt;</span><span class="st"> </span><span class="dv">10</span> <span class="op">|</span><span class="st"> </span>y <span class="op">&lt;</span><span class="st"> </span><span class="dv">10</span>){</span>
<span id="cb261-8"><a href="functions.html#cb261-8"></a>    <span class="kw">warning</span>(<span class="st">&quot;Per qualche strano motivo la funzione non gestisce bene i numeri minori di 10, attenzione!! :)&quot;</span>)</span>
<span id="cb261-9"><a href="functions.html#cb261-9"></a>  }</span>
<span id="cb261-10"><a href="functions.html#cb261-10"></a>  res &lt;-<span class="st"> </span>x <span class="op">+</span><span class="st"> </span>y</span>
<span id="cb261-11"><a href="functions.html#cb261-11"></a>  <span class="kw">message</span>(<span class="st">&quot;Ottimo lavoro! :)&quot;</span>)</span>
<span id="cb261-12"><a href="functions.html#cb261-12"></a>  <span class="kw">return</span>(res)</span>
<span id="cb261-13"><a href="functions.html#cb261-13"></a>}</span>
<span id="cb261-14"><a href="functions.html#cb261-14"></a></span>
<span id="cb261-15"><a href="functions.html#cb261-15"></a><span class="kw">my_positive_sum</span>(<span class="dv">12</span>, <span class="dv">10</span>)</span>
<span id="cb261-16"><a href="functions.html#cb261-16"></a><span class="co">## Ottimo lavoro! :)</span></span>
<span id="cb261-17"><a href="functions.html#cb261-17"></a><span class="co">## [1] 22</span></span></code></pre></div>
<p>Un ultimo aspetto importante riguarda cosa avviene se assegniamo il risultato di una funzione in presenza di errori, warning o messaggi. In generale, tranne che per la presenza di errori e quindi usando la funzione <code>stop()</code>, l’output rimane lo stesso e il messaggio è solo stampato nella console:</p>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb262-1"><a href="functions.html#cb262-1"></a>res1 &lt;-<span class="st"> </span><span class="kw">my_positive_sum</span>(<span class="dv">10</span>,<span class="dv">5</span>)</span>
<span id="cb262-2"><a href="functions.html#cb262-2"></a><span class="co">## Warning in my_positive_sum(10, 5): Per qualche strano motivo la funzione non</span></span>
<span id="cb262-3"><a href="functions.html#cb262-3"></a><span class="co">## gestisce bene i numeri minori di 10, attenzione!! :)</span></span>
<span id="cb262-4"><a href="functions.html#cb262-4"></a><span class="co">## Ottimo lavoro! :)</span></span>
<span id="cb262-5"><a href="functions.html#cb262-5"></a>res2 &lt;-<span class="st"> </span><span class="kw">my_positive_sum</span>(<span class="dv">10</span>,<span class="dv">23</span>)</span>
<span id="cb262-6"><a href="functions.html#cb262-6"></a><span class="co">## Ottimo lavoro! :)</span></span>
<span id="cb262-7"><a href="functions.html#cb262-7"></a>res3 &lt;-<span class="st"> </span><span class="kw">my_positive_sum</span>(<span class="dv">10</span>,<span class="op">-</span><span class="dv">1</span>)</span>
<span id="cb262-8"><a href="functions.html#cb262-8"></a><span class="co">## Error in my_positive_sum(10, -1): Gli argomenti devono essere numeri positivi!</span></span>
<span id="cb262-9"><a href="functions.html#cb262-9"></a></span>
<span id="cb262-10"><a href="functions.html#cb262-10"></a>res1</span>
<span id="cb262-11"><a href="functions.html#cb262-11"></a><span class="co">## [1] 15</span></span>
<span id="cb262-12"><a href="functions.html#cb262-12"></a>res2</span>
<span id="cb262-13"><a href="functions.html#cb262-13"></a><span class="co">## [1] 33</span></span>
<span id="cb262-14"><a href="functions.html#cb262-14"></a>res3 <span class="co"># nessun output</span></span>
<span id="cb262-15"><a href="functions.html#cb262-15"></a><span class="co">## Error in eval(expr, envir, enclos): object &#39;res3&#39; not found</span></span></code></pre></div>
<p>Come vedete infatti, quando abbiamo un errore e fermiamo l’esecuzione, la funzione pur prevedendo un output, non fornisce risultato perchè è stata interrotta.</p>
</div>
<div id="ambiente-della-funzione" class="section level2">
<h2><span class="header-section-number">12.3</span> Ambiente della funzione</h2>
<p>Il concetto di <code>ambiente</code> in R è abbastanza complesso<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>. In parole semplici, tutte le operazioni che normalmente eseguiamo nella console o in uno script, avvengono in quello che si chiama <code>global environment</code>. Quando scriviamo ed eseguiamo una funzione, stiamo creando un oggetto funzione (nel <code>global environment</code>) che a sua volta crea un ambiente interno per eseguire le operazioni previste. Immaginiamo di avere questa funzione <code>my_fun()</code> che riceve un valore <code>x</code> e lo somma ad un valore <code>y</code> che non è un argomento.</p>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb263-1"><a href="functions.html#cb263-1"></a>my_fun &lt;-<span class="st"> </span><span class="cf">function</span>(x){</span>
<span id="cb263-2"><a href="functions.html#cb263-2"></a>  <span class="kw">return</span>(x <span class="op">+</span><span class="st"> </span>y)</span>
<span id="cb263-3"><a href="functions.html#cb263-3"></a>}</span>
<span id="cb263-4"><a href="functions.html#cb263-4"></a></span>
<span id="cb263-5"><a href="functions.html#cb263-5"></a><span class="kw">my_fun</span>(<span class="dv">10</span>)</span>
<span id="cb263-6"><a href="functions.html#cb263-6"></a><span class="co">## Error in my_fun(10): object &#39;y&#39; not found</span></span></code></pre></div>
<p>Chiaramente otteniamo un errore perchè l’oggetto <code>y</code> non è stato creato. Se però creiamo l’oggetto <code>y</code> all’interno della funzione, questa esegue regolarmente la somma MA non crea l’oggetto <code>y</code> nell’ambiente globale.</p>
<div class="sourceCode" id="cb264"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb264-1"><a href="functions.html#cb264-1"></a>my_fun &lt;-<span class="st"> </span><span class="cf">function</span>(x){</span>
<span id="cb264-2"><a href="functions.html#cb264-2"></a>  y &lt;-<span class="st"> </span><span class="dv">1</span></span>
<span id="cb264-3"><a href="functions.html#cb264-3"></a>  <span class="kw">return</span>(x <span class="op">+</span><span class="st"> </span>y)</span>
<span id="cb264-4"><a href="functions.html#cb264-4"></a>}</span>
<span id="cb264-5"><a href="functions.html#cb264-5"></a></span>
<span id="cb264-6"><a href="functions.html#cb264-6"></a><span class="kw">my_fun</span>(<span class="dv">10</span>)</span>
<span id="cb264-7"><a href="functions.html#cb264-7"></a><span class="co">## [1] 11</span></span>
<span id="cb264-8"><a href="functions.html#cb264-8"></a><span class="kw">ls</span>() <span class="co"># abbiamo solo la nostra funzione come oggetto</span></span>
<span id="cb264-9"><a href="functions.html#cb264-9"></a><span class="co">## [1] &quot;my_fun&quot;          &quot;my_greetings&quot;    &quot;my_positive_sum&quot; &quot;my_sum&quot;         </span></span>
<span id="cb264-10"><a href="functions.html#cb264-10"></a><span class="co">## [5] &quot;res1&quot;            &quot;res2&quot;</span></span></code></pre></div>
<p>Da qui è chiaro che quello che avviene all’interno della funzione è in qualche modo compartimentalizzato rispetto all’ambiente globale. L’unico modo per influenzare l’ambiente globale è quello di assegnare il risultato della funzione, creando quindi un nuovo oggetto:</p>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb265-1"><a href="functions.html#cb265-1"></a>res &lt;-<span class="st"> </span><span class="kw">my_fun</span>(<span class="dv">10</span>)</span>
<span id="cb265-2"><a href="functions.html#cb265-2"></a><span class="kw">ls</span>()</span>
<span id="cb265-3"><a href="functions.html#cb265-3"></a><span class="co">## [1] &quot;my_fun&quot;          &quot;my_greetings&quot;    &quot;my_positive_sum&quot; &quot;my_sum&quot;         </span></span>
<span id="cb265-4"><a href="functions.html#cb265-4"></a><span class="co">## [5] &quot;res&quot;             &quot;res1&quot;            &quot;res2&quot;</span></span></code></pre></div>
<p>Altra cosa importante, sopratutto per gestire effetti collaterali riguarda il fatto che la funzione NON modifica gli oggetti presenti nell’ambiente globale:</p>
<div class="sourceCode" id="cb266"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb266-1"><a href="functions.html#cb266-1"></a>y &lt;-<span class="st"> </span><span class="dv">10</span> <span class="co"># ambiente globale</span></span>
<span id="cb266-2"><a href="functions.html#cb266-2"></a></span>
<span id="cb266-3"><a href="functions.html#cb266-3"></a>my_fun &lt;-<span class="st"> </span><span class="cf">function</span>(x){</span>
<span id="cb266-4"><a href="functions.html#cb266-4"></a>  y &lt;-<span class="st"> </span><span class="dv">1</span> <span class="co"># ambiente funzione</span></span>
<span id="cb266-5"><a href="functions.html#cb266-5"></a>  <span class="kw">return</span>(x <span class="op">+</span><span class="st"> </span>y) <span class="co"># questo si basa su y funzione</span></span>
<span id="cb266-6"><a href="functions.html#cb266-6"></a>}</span>
<span id="cb266-7"><a href="functions.html#cb266-7"></a></span>
<span id="cb266-8"><a href="functions.html#cb266-8"></a><span class="kw">my_fun</span>(<span class="dv">1</span>)</span>
<span id="cb266-9"><a href="functions.html#cb266-9"></a><span class="co">## [1] 2</span></span>
<span id="cb266-10"><a href="functions.html#cb266-10"></a>y</span>
<span id="cb266-11"><a href="functions.html#cb266-11"></a><span class="co">## [1] 10</span></span></code></pre></div>
<p>Come vedete, abbiamo creato un oggetto <code>y</code> dentro la funzione. Se eseguito nello stesso ambiente questo avrebbe sovrascritto il precedente valore. Il risultato si basa sul valore di <code>y</code> creato nell’ambiente funzione e l’<code>y</code> globale non è stato modificato.</p>
<p>Un ultimo punto importante riguarda invece il legame tra ambiente funzione e quello globale. Abbiamo visto la loro indipendenza che però non è totale. Se infatti all’interno della funzione utilizziamo una variabile definita solamente nell’ambiente globale, la funzione in automatico userà quel valore (se non specificato internamente). Questo è utile per far lavorare funzioni e variabili globali MA è sempre preferibile creare un ambiente funzione indipendente e fornire come <strong>argomenti</strong> tutte gli oggetti necessari.</p>
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb267-1"><a href="functions.html#cb267-1"></a>y &lt;-<span class="st"> </span><span class="dv">10</span></span>
<span id="cb267-2"><a href="functions.html#cb267-2"></a></span>
<span id="cb267-3"><a href="functions.html#cb267-3"></a>my_fun &lt;-<span class="st"> </span><span class="cf">function</span>(x){</span>
<span id="cb267-4"><a href="functions.html#cb267-4"></a>  <span class="kw">return</span>(x <span class="op">+</span><span class="st"> </span>y) <span class="co"># viene utilizzato y globale</span></span>
<span id="cb267-5"><a href="functions.html#cb267-5"></a>}</span>
<span id="cb267-6"><a href="functions.html#cb267-6"></a></span>
<span id="cb267-7"><a href="functions.html#cb267-7"></a><span class="kw">my_fun</span>(<span class="dv">1</span>)</span>
<span id="cb267-8"><a href="functions.html#cb267-8"></a><span class="co">## [1] 11</span></span></code></pre></div>
<p>Le cose importanti da ricordare quando si definiscono e utilizzano funzioni sono:</p>
<ul>
<li>Ogni volta che una funzione viene eseguita, l’ambiente interno viene ricreato e quindi è come ripartire da zero</li>
<li>Gli oggetti creati all’interno della funzione hanno priorità rispetto a quelli nell’ambiente esterno</li>
<li>Se la funzione utilizza un oggetto non definito internamente, automaticamente cercherà nell’ambiente principale</li>
</ul>
</div>
<div id="best-practice" class="section level2">
<h2><span class="header-section-number">12.4</span> Best practice</h2>
<p>Scrivere funzioni è sicuramente l’aspetto più importante quando si scrive del codice. Permette di automatizzare operazioni, ridurre la quantità di codice, rendere più chiaro il nostro script e riutilizzare una certa porzione di codice in altri contesti. Ci sono tuttavia delle convenzioni e degli accorgimenti per scrivere delle ottime e versatili funzioni:</p>
<ul>
<li>Quando serve una funzione?</li>
<li>Scegliere il nome</li>
<li>Semplificare la quantita di operazioni e output</li>
<li>Commentare e documentare</li>
</ul>
<div id="quando-serve-una-funzione" class="section level3">
<h3><span class="header-section-number">12.4.1</span> Quando serve una funzione?</h3>
<p><a href="https://r4ds.had.co.nz/functions.html#when-should-you-write-a-function">Hadley Wickam</a> suggerisce che se ripetiamo una serie di operazioni più di 2 volte, forse è meglio scrivere una funzione. Immaginiamo di avere una serie di oggetti e voler eseguire la stessa operazione in tutti. Ad esempio vogliamo <em>centrare</em> (ovvero sottrarre a tutti i valori di un vettore la loro media) un vettore numerico:</p>
<div class="sourceCode" id="cb268"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb268-1"><a href="functions.html#cb268-1"></a>vec1 &lt;-<span class="st"> </span><span class="kw">runif</span>(<span class="dv">10</span>)</span>
<span id="cb268-2"><a href="functions.html#cb268-2"></a>vec2 &lt;-<span class="st"> </span><span class="kw">runif</span>(<span class="dv">10</span>)</span>
<span id="cb268-3"><a href="functions.html#cb268-3"></a>vec3 &lt;-<span class="st"> </span><span class="kw">runif</span>(<span class="dv">10</span>)</span></code></pre></div>
<p>Abbiamo visto nei capitoli precedenti l’utilizzo dell’<code>apply</code> family e come si possa applicare una funzione ad una serie di oggetti. Pensiamo però ad un caso dove abbiamo uno script molto lungo e in diversi momenti eseguiamo una certa operazione:</p>
<div class="sourceCode" id="cb269"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb269-1"><a href="functions.html#cb269-1"></a><span class="co"># Centriamo</span></span>
<span id="cb269-2"><a href="functions.html#cb269-2"></a>vec1 <span class="op">-</span><span class="st"> </span><span class="kw">mean</span>(vec2)</span>
<span id="cb269-3"><a href="functions.html#cb269-3"></a><span class="co">##  [1]  0.17855506 -0.23515285 -0.33246357 -0.11125364  0.05422813 -0.07368524</span></span>
<span id="cb269-4"><a href="functions.html#cb269-4"></a><span class="co">##  [7]  0.04346748 -0.08162451  0.23095973  0.21206251</span></span>
<span id="cb269-5"><a href="functions.html#cb269-5"></a>vec2 <span class="op">-</span><span class="st"> </span><span class="kw">mean</span>(vec2)</span>
<span id="cb269-6"><a href="functions.html#cb269-6"></a><span class="co">##  [1]  0.09109738  0.04562505  0.03801105  0.05286699  0.11205444  0.12029171</span></span>
<span id="cb269-7"><a href="functions.html#cb269-7"></a><span class="co">##  [7] -0.33617103 -0.42046621  0.25932730  0.03736333</span></span>
<span id="cb269-8"><a href="functions.html#cb269-8"></a>vec3 <span class="op">-</span><span class="st"> </span><span class="kw">mean</span>(vec3)</span>
<span id="cb269-9"><a href="functions.html#cb269-9"></a><span class="co">##  [1]  0.37025476  0.35477204  0.30731894 -0.46837085  0.18794492 -0.02719718</span></span>
<span id="cb269-10"><a href="functions.html#cb269-10"></a><span class="co">##  [7] -0.57468747 -0.24079790  0.32218572 -0.23142299</span></span></code></pre></div>
<p>L’operazione viene eseguita correttamente ed è anche di facile comprensione. Tuttavia stiamo eseguendo sempre la stessa cosa, semplicemente cambiando un input (proprio la definizione di funzione) quindi possiamo:</p>
<div class="sourceCode" id="cb270"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb270-1"><a href="functions.html#cb270-1"></a>my_fun &lt;-<span class="st"> </span><span class="cf">function</span>(x){</span>
<span id="cb270-2"><a href="functions.html#cb270-2"></a>  <span class="kw">return</span>(x <span class="op">-</span><span class="st"> </span><span class="kw">mean</span>(x))</span>
<span id="cb270-3"><a href="functions.html#cb270-3"></a>}</span>
<span id="cb270-4"><a href="functions.html#cb270-4"></a></span>
<span id="cb270-5"><a href="functions.html#cb270-5"></a><span class="kw">my_fun</span>(vec1)</span>
<span id="cb270-6"><a href="functions.html#cb270-6"></a><span class="co">##  [1]  0.19004575 -0.22366216 -0.32097288 -0.09976295  0.06571882 -0.06219455</span></span>
<span id="cb270-7"><a href="functions.html#cb270-7"></a><span class="co">##  [7]  0.05495817 -0.07013382  0.24245042  0.22355320</span></span>
<span id="cb270-8"><a href="functions.html#cb270-8"></a><span class="kw">my_fun</span>(vec2)</span>
<span id="cb270-9"><a href="functions.html#cb270-9"></a><span class="co">##  [1]  0.09109738  0.04562505  0.03801105  0.05286699  0.11205444  0.12029171</span></span>
<span id="cb270-10"><a href="functions.html#cb270-10"></a><span class="co">##  [7] -0.33617103 -0.42046621  0.25932730  0.03736333</span></span>
<span id="cb270-11"><a href="functions.html#cb270-11"></a><span class="kw">my_fun</span>(vec3)</span>
<span id="cb270-12"><a href="functions.html#cb270-12"></a><span class="co">##  [1]  0.37025476  0.35477204  0.30731894 -0.46837085  0.18794492 -0.02719718</span></span>
<span id="cb270-13"><a href="functions.html#cb270-13"></a><span class="co">##  [7] -0.57468747 -0.24079790  0.32218572 -0.23142299</span></span></code></pre></div>
<p>Il codice non è molto cambiato rispetto a prima in termini di numero di righe o complessità. Immaginate però di esservi resi conto di un errore o di voler cambiare o estendere le operazioni su<code>vec1, vec2 e vec3</code>. Nel primo caso dovreste andare linea per linea dello script e modificare il codice. Nel caso di una funzione, semplicemente cambiando le operazioni queste verranno applicate ogni volta che quella funzione è chiamata. Immaginiamo di voler anche <em>standardizzare</em> (sottrarre la media e dividere per la deviazione standard) i nostri vettori:</p>
<div class="sourceCode" id="cb271"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb271-1"><a href="functions.html#cb271-1"></a>my_fun &lt;-<span class="st"> </span><span class="cf">function</span>(x){</span>
<span id="cb271-2"><a href="functions.html#cb271-2"></a>  res &lt;-<span class="st"> </span>(x <span class="op">-</span><span class="st"> </span><span class="kw">mean</span>(x)) <span class="op">/</span><span class="st"> </span><span class="kw">sd</span>(x)</span>
<span id="cb271-3"><a href="functions.html#cb271-3"></a>  <span class="kw">return</span>(res)</span>
<span id="cb271-4"><a href="functions.html#cb271-4"></a>}</span>
<span id="cb271-5"><a href="functions.html#cb271-5"></a></span>
<span id="cb271-6"><a href="functions.html#cb271-6"></a><span class="kw">my_fun</span>(vec1)</span>
<span id="cb271-7"><a href="functions.html#cb271-7"></a><span class="co">##  [1]  1.0016246 -1.1787978 -1.6916680 -0.5257946  0.3463670 -0.3277926</span></span>
<span id="cb271-8"><a href="functions.html#cb271-8"></a><span class="co">##  [7]  0.2896537 -0.3696360  1.2778202  1.1782236</span></span>
<span id="cb271-9"><a href="functions.html#cb271-9"></a><span class="kw">my_fun</span>(vec2)</span>
<span id="cb271-10"><a href="functions.html#cb271-10"></a><span class="co">##  [1]  0.4320610  0.2163927  0.1802806  0.2507401  0.5314572  0.5705253</span></span>
<span id="cb271-11"><a href="functions.html#cb271-11"></a><span class="co">##  [7] -1.5944081 -1.9942074  1.2299500  0.1772086</span></span>
<span id="cb271-12"><a href="functions.html#cb271-12"></a><span class="kw">my_fun</span>(vec3)</span>
<span id="cb271-13"><a href="functions.html#cb271-13"></a><span class="co">##  [1]  1.03201271  0.98885763  0.85659141 -1.30549208  0.52385970 -0.07580681</span></span>
<span id="cb271-14"><a href="functions.html#cb271-14"></a><span class="co">##  [7] -1.60182886 -0.67117704  0.89802964 -0.64504629</span></span></code></pre></div>
<p>Ovviamente la combinazione di funzione e <code>apply</code> family permette di rendere il tutto ancora più compatto ed efficiente:</p>
<div class="sourceCode" id="cb272"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb272-1"><a href="functions.html#cb272-1"></a>my_list &lt;-<span class="st"> </span><span class="kw">list</span>(vec1, vec2, vec3)</span>
<span id="cb272-2"><a href="functions.html#cb272-2"></a><span class="kw">lapply</span>(my_list, my_fun)</span>
<span id="cb272-3"><a href="functions.html#cb272-3"></a><span class="co">## [[1]]</span></span>
<span id="cb272-4"><a href="functions.html#cb272-4"></a><span class="co">##  [1]  1.0016246 -1.1787978 -1.6916680 -0.5257946  0.3463670 -0.3277926</span></span>
<span id="cb272-5"><a href="functions.html#cb272-5"></a><span class="co">##  [7]  0.2896537 -0.3696360  1.2778202  1.1782236</span></span>
<span id="cb272-6"><a href="functions.html#cb272-6"></a><span class="co">## </span></span>
<span id="cb272-7"><a href="functions.html#cb272-7"></a><span class="co">## [[2]]</span></span>
<span id="cb272-8"><a href="functions.html#cb272-8"></a><span class="co">##  [1]  0.4320610  0.2163927  0.1802806  0.2507401  0.5314572  0.5705253</span></span>
<span id="cb272-9"><a href="functions.html#cb272-9"></a><span class="co">##  [7] -1.5944081 -1.9942074  1.2299500  0.1772086</span></span>
<span id="cb272-10"><a href="functions.html#cb272-10"></a><span class="co">## </span></span>
<span id="cb272-11"><a href="functions.html#cb272-11"></a><span class="co">## [[3]]</span></span>
<span id="cb272-12"><a href="functions.html#cb272-12"></a><span class="co">##  [1]  1.03201271  0.98885763  0.85659141 -1.30549208  0.52385970 -0.07580681</span></span>
<span id="cb272-13"><a href="functions.html#cb272-13"></a><span class="co">##  [7] -1.60182886 -0.67117704  0.89802964 -0.64504629</span></span></code></pre></div>
</div>
<div id="scegliere-il-nome" class="section level3">
<h3><span class="header-section-number">12.4.2</span> Scegliere il nome</h3>
<p>Questo potrebbe sembrare un argomento marginale tuttavia la scelta dei nomi sia per le variabili ma sopratutto per le funzioni è estremamente importante. Permette di:</p>
<ul>
<li>leggere chiaramente il nostro codice e renderlo comprensibile ad altri</li>
<li>organizzare facilmente un gruppo di funzioni. Quando avete più funzioni, usare una giusta denominazione permette di sfruttare i suggerimenti di RStudio in modo più efficace. Il pacchetto <a href="https://stringr.tidyverse.org/"><code>stringr</code></a> and esempio che fornisce strumenti per lavorare con stringhe, utilizza tutte le funzioni denominate come <code>str_</code> permettendo di cercare facilmente quella desiderata.</li>
</ul>
<p>E’ utile utilizzare <strong>verbi</strong> per nominare le funzioni mentre <strong>nomi</strong> per nominare argomenti. Ad esempio un nome adatto alla nostra ultima funzione potrebbe essere <code>center_var()</code> mentre il nome del nuovo vettore <code>centered_vec</code> o <code>c_vec</code>. Se troviamo <code>center_var</code> all’interno di uno script è subito chiaro il compito di quella funzione, anche senza guardare il codice al suo interno.</p>
</div>
<div id="semplificare-la-quantita-di-operazioni-e-output" class="section level3">
<h3><span class="header-section-number">12.4.3</span> Semplificare la quantita di operazioni e output</h3>
<p>Questo è un punto molto importante ma allo stesso tempo variegato. Ci sono diversi stili di programmazione e quindi non ci sono regole fisse oppure delle pratiche migliori di altre.
Abbiamo detto che una funzione è un modo per astrarre, riutilizzare e semplificare una serie di operazioni. Possiamo quindi scrivere funzioni molto complesse che ricevono diversi input, eseguono diverse operazioni e restituiscono diversi output. E’ buona pratica però scrivere funzioni che:</p>
<ul>
<li>riducono il numero di operazioni interne</li>
<li>forniscono un singolo (o limitati) output</li>
<li>hanno un numero di input limitato</li>
</ul>
<p>Se quindi abbiamo pensato ad una funzione che ha troppi output, è troppo complessa oppure ha troppi input magari possiamo valutare di scomporre la funzione in sotto-funzioni.</p>
<p>Facciamo un esempio con la nostra <code>center_vec()</code>. Possiamo pensare a diverse alternative ed estensioni di questa funzione. Ad esempio possiamo pensare di creare una funzione che centra oppure standardizza il vettore. Possiamo inoltre scegliere se centrare usando la media oppure la mediana. Quindi possiamo pensare a una macro funzione <code>trans_vec()</code> che in base agli argomenti trasforma il vettore:</p>
<div class="sourceCode" id="cb273"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb273-1"><a href="functions.html#cb273-1"></a>trans_vec &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">what =</span> <span class="kw">c</span>(<span class="st">&quot;center_mean&quot;</span>, <span class="st">&quot;center_median&quot;</span>, <span class="st">&quot;standardize&quot;</span>)){</span>
<span id="cb273-2"><a href="functions.html#cb273-2"></a>  <span class="cf">if</span>(<span class="kw">match.arg</span>(what) <span class="op">==</span><span class="st"> &quot;center_mean&quot;</span>){</span>
<span id="cb273-3"><a href="functions.html#cb273-3"></a>    res &lt;-<span class="st"> </span>x <span class="op">-</span><span class="st"> </span><span class="kw">mean</span>(x)</span>
<span id="cb273-4"><a href="functions.html#cb273-4"></a>  }<span class="cf">else</span> <span class="cf">if</span>(<span class="kw">match.arg</span>(what) <span class="op">==</span><span class="st"> &quot;center_median&quot;</span>){</span>
<span id="cb273-5"><a href="functions.html#cb273-5"></a>    res &lt;-<span class="st"> </span>x <span class="op">-</span><span class="st"> </span><span class="kw">median</span>(x)</span>
<span id="cb273-6"><a href="functions.html#cb273-6"></a>  }<span class="cf">else</span> <span class="cf">if</span>(<span class="kw">match.arg</span>(what) <span class="op">==</span><span class="st"> &quot;standardize&quot;</span>){</span>
<span id="cb273-7"><a href="functions.html#cb273-7"></a>    res &lt;-<span class="st"> </span>(x <span class="op">-</span><span class="st"> </span><span class="kw">mean</span>(x))<span class="op">/</span><span class="kw">sd</span>(x)</span>
<span id="cb273-8"><a href="functions.html#cb273-8"></a>  }</span>
<span id="cb273-9"><a href="functions.html#cb273-9"></a>  <span class="kw">return</span>(res)</span>
<span id="cb273-10"><a href="functions.html#cb273-10"></a>}</span>
<span id="cb273-11"><a href="functions.html#cb273-11"></a></span>
<span id="cb273-12"><a href="functions.html#cb273-12"></a>vec &lt;-<span class="st"> </span><span class="kw">runif</span>(<span class="dv">10</span>)</span>
<span id="cb273-13"><a href="functions.html#cb273-13"></a><span class="kw">trans_vec</span>(vec, <span class="st">&quot;center_mean&quot;</span>)</span>
<span id="cb273-14"><a href="functions.html#cb273-14"></a><span class="co">##  [1] -0.23426668 -0.19612683  0.35162703  0.28416188  0.08679110 -0.18225356</span></span>
<span id="cb273-15"><a href="functions.html#cb273-15"></a><span class="co">##  [7] -0.37592820 -0.31418493  0.08921857  0.49096161</span></span>
<span id="cb273-16"><a href="functions.html#cb273-16"></a><span class="kw">trans_vec</span>(vec, <span class="st">&quot;center_mean&quot;</span>)</span>
<span id="cb273-17"><a href="functions.html#cb273-17"></a><span class="co">##  [1] -0.23426668 -0.19612683  0.35162703  0.28416188  0.08679110 -0.18225356</span></span>
<span id="cb273-18"><a href="functions.html#cb273-18"></a><span class="co">##  [7] -0.37592820 -0.31418493  0.08921857  0.49096161</span></span>
<span id="cb273-19"><a href="functions.html#cb273-19"></a><span class="kw">trans_vec</span>(vec, <span class="st">&quot;standardize&quot;</span>)</span>
<span id="cb273-20"><a href="functions.html#cb273-20"></a><span class="co">##  [1] -0.7725771 -0.6467975  1.1596143  0.9371242  0.2862243 -0.6010455</span></span>
<span id="cb273-21"><a href="functions.html#cb273-21"></a><span class="co">##  [7] -1.2397560 -1.0361357  0.2942297  1.6191193</span></span></code></pre></div>
<p>La funzione è molto chiara ma comunque contiene dei margini di fragilità. L’utente deve inserire una per stringa eseguire l’operazione. Ci sono diversi <code>if</code> e lo scopo della funzione è forse troppo generico. Una migliore soluzione sarebbe quella di scrivere 3 funzioni più semplici, mirate e facili da mantenere e leggere:</p>
<div class="sourceCode" id="cb274"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb274-1"><a href="functions.html#cb274-1"></a>center_vec_mean &lt;-<span class="st"> </span><span class="cf">function</span>(x){</span>
<span id="cb274-2"><a href="functions.html#cb274-2"></a>  <span class="kw">return</span>(x <span class="op">-</span><span class="st"> </span><span class="kw">mean</span>(x))</span>
<span id="cb274-3"><a href="functions.html#cb274-3"></a>}</span>
<span id="cb274-4"><a href="functions.html#cb274-4"></a></span>
<span id="cb274-5"><a href="functions.html#cb274-5"></a>center_vec_median &lt;-<span class="st"> </span><span class="cf">function</span>(x){</span>
<span id="cb274-6"><a href="functions.html#cb274-6"></a>  <span class="kw">return</span>(x <span class="op">-</span><span class="st"> </span><span class="kw">median</span>(x))</span>
<span id="cb274-7"><a href="functions.html#cb274-7"></a>}</span>
<span id="cb274-8"><a href="functions.html#cb274-8"></a></span>
<span id="cb274-9"><a href="functions.html#cb274-9"></a>standardize_vec &lt;-<span class="st"> </span><span class="cf">function</span>(x){</span>
<span id="cb274-10"><a href="functions.html#cb274-10"></a>  <span class="kw">return</span>((x <span class="op">-</span><span class="st"> </span><span class="kw">mean</span>(x)) <span class="op">/</span><span class="st"> </span><span class="kw">sd</span>(x))</span>
<span id="cb274-11"><a href="functions.html#cb274-11"></a>}</span>
<span id="cb274-12"><a href="functions.html#cb274-12"></a></span>
<span id="cb274-13"><a href="functions.html#cb274-13"></a>vec &lt;-<span class="st"> </span><span class="kw">runif</span>(<span class="dv">10</span>)</span>
<span id="cb274-14"><a href="functions.html#cb274-14"></a><span class="kw">center_vec_mean</span>(vec)</span>
<span id="cb274-15"><a href="functions.html#cb274-15"></a><span class="co">##  [1]  0.4249892 -0.0964139  0.1098248  0.3673295  0.2611899 -0.3165211</span></span>
<span id="cb274-16"><a href="functions.html#cb274-16"></a><span class="co">##  [7] -0.5194926  0.3910286 -0.3505038 -0.2714303</span></span>
<span id="cb274-17"><a href="functions.html#cb274-17"></a><span class="kw">center_vec_median</span>(vec)</span>
<span id="cb274-18"><a href="functions.html#cb274-18"></a><span class="co">##  [1]  0.4182838 -0.1031193  0.1031193  0.3606240  0.2544844 -0.3232266</span></span>
<span id="cb274-19"><a href="functions.html#cb274-19"></a><span class="co">##  [7] -0.5261980  0.3843231 -0.3572093 -0.2781358</span></span>
<span id="cb274-20"><a href="functions.html#cb274-20"></a><span class="kw">standardize_vec</span>(vec)</span>
<span id="cb274-21"><a href="functions.html#cb274-21"></a><span class="co">##  [1]  1.2022578 -0.2727466  0.3106848  1.0391434  0.7388836 -0.8954110</span></span>
<span id="cb274-22"><a href="functions.html#cb274-22"></a><span class="co">##  [7] -1.4695998  1.1061861 -0.9915452 -0.7678531</span></span></code></pre></div>
<p>In questo modo il codice è molto più leggibile e chiaro sia dentro le funzioni che quando le funzioni vengono utilizzate. Un’ulteriore alternativa sarebbe quella di raggruppare le funzione di “centramento” specificando se utilizzare media o mediana e separare quella di standardizzazione.</p>
</div>
<div id="commentare-e-documentare" class="section level3">
<h3><span class="header-section-number">12.4.4</span> Commentare e documentare</h3>
<p>La documentazione è forse la parte di più importante della scrittura del codice. Possiamo classificarla in documentazione <em>formale</em> e <em>informale</em> in base allo scopo. La documentazione <em>formale</em> è quella che troviamo facendo <code>help(funzione)</code> oppure <code>?funzione</code>. E’ una documentazione standardizzata e necessaria quando si creano delle funzioni in un pacchetto che altri utenti devono utilizzare. La documentazione <em>informale</em> è quella che mettiamo nei nostri script e all’interno delle funzioni come <code># commento</code>. Entrambe sono molto importati e permettono di descrivere lo scopo generale della funzione, i singoli argomenti e i passaggi eseguiti.</p>
</div>
</div>
<div id="importare-una-funzione" class="section level2">
<h2><span class="header-section-number">12.5</span> Importare una funzione</h2>
<p>Abbiamo già visto che il comando <code>library()</code> carica un certo pacchetto, rendendo le funzioni contenute disponibili all’utilizzo. Senza la necessità di creare un pacchetto, possiamo comunque organizzare le nostre funzioni in modo efficace. Abbiamo 2 opzioni:</p>
<ul>
<li>scrivere le funzioni nello stesso script dove esse vengono utilizzate</li>
<li>scrivere uno script separato e importare tutte le funzioni contenute</li>
</ul>
<p>Anche in questo caso è una questione di stile e comodità, in generale:</p>
<ul>
<li>Se abbiamo tante funzioni, è meglio scriverle in uno o più file separati e poi importarle all’inizio dello script principale</li>
<li>Se abbiamo poche funzioni possiamo tenerle nello script principale, magari in una sezione apposita nella parte iniziale</li>
</ul>
<p>Nel secondo caso è sufficiente quindi scrivere la funzione e questa sarà salvata come oggetto nell’ambiente principale. Riguardo il primo scenario si può utilizzare la funzione <code>source("percorso/script.R")</code>. La funzione <code>source()</code> accetta il percorso di uno script R che verrà poi eseguito in background. Quindi se la vostra directory è organizzata in questo modo:</p>
<pre><code>- working directory/
|-- main_script.R
|-- functions/
    |-- my_functions.R</code></pre>
<p>Dove lo script <code>my_functions.R</code> è uno script dove sono dichiarare tutte le funzioni:</p>
<div class="sourceCode" id="cb276"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb276-1"><a href="functions.html#cb276-1"></a>fun1 &lt;-<span class="st"> </span><span class="cf">function</span>(x){</span>
<span id="cb276-2"><a href="functions.html#cb276-2"></a>  <span class="co"># do</span></span>
<span id="cb276-3"><a href="functions.html#cb276-3"></a>}</span>
<span id="cb276-4"><a href="functions.html#cb276-4"></a></span>
<span id="cb276-5"><a href="functions.html#cb276-5"></a>fun2 &lt;-<span class="st"> </span><span class="cf">function</span>(x){</span>
<span id="cb276-6"><a href="functions.html#cb276-6"></a>  <span class="co"># do</span></span>
<span id="cb276-7"><a href="functions.html#cb276-7"></a>}</span>
<span id="cb276-8"><a href="functions.html#cb276-8"></a></span>
<span id="cb276-9"><a href="functions.html#cb276-9"></a>fun3 &lt;-<span class="st"> </span><span class="cf">function</span>(x){</span>
<span id="cb276-10"><a href="functions.html#cb276-10"></a>  <span class="co"># do</span></span>
<span id="cb276-11"><a href="functions.html#cb276-11"></a>}</span>
<span id="cb276-12"><a href="functions.html#cb276-12"></a></span>
<span id="cb276-13"><a href="functions.html#cb276-13"></a>...</span></code></pre></div>
<p>Scrivendo all’inizio del nostro script principale <code>source("functions/my_functions.R")</code>, tutte le funzioni saranno caricate nel ambiente di lavoro.</p>
<!-- TODO print vs cat (aspetto nel return) -->

</div>
</div>
<div class="footnotes">
<hr />
<ol start="2">
<li id="fn2"><p>per una non semplice trattazione dell’argomento, il <a href="https://adv-r.hadley.nz/environments.html">capitolo 7</a> del libro “Advanced R” di Hadley Wickam è un ottima risorsa.<a href="functions.html#fnref2" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
<hr>
<center>
  <div class="footer">
    Questo libro è rilasciato in accordo con <a href= "https://creativecommons.org/licenses/by-sa/4.0/legalcode">CC BY-SA</a>.
    <br>
    Le illustrazioni utilizzate appartengono a <a href= "https://rstudio4edu.github.io/rstudio4edu-book/">rstudio4edu-book</a> in accordo con <a href= "https://creativecommons.org/licenses/by-nc/2.0/">CC BY-NC</a>.
    <br>
    Per conoscere di più riguardo <span style="color: #8C3031; font-weight:bold"> Psicostat</span> e le nostre attività, visita <a href= "https://psicostat.dpss.psy.unipd.it/">https://psicostat.dpss.psy.unipd.it/</a>.
  </div>
</center>
            </section>

          </div>
        </div>
      </div>
<a href="third-section.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="conditionals.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": true
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/psicostat/Introduction2R/edit/master/15-functions.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Introduction2R.pdf", "Introduction2R.epub"],
"toc": {
"collapse": "section",
"scroll_highlight": true,
"toc_float": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
